var SP,TP,DM;gantt={version:"4.1.0",event:function(t,n,i){t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&t.attachEvent("on"+n,i)},t:function(t,n,i){t.removeEventListener?t.removeEventListener(n,i,!1):t.detachEvent&&t.detachEvent("on"+n,i)},i:function(t){t.s=!1,t.h=function(){this.s=!0},t.o=function(){this.s=!1},t.attachEvent=function(t,n,i){return this[t="ev_"+t.toLowerCase()]||(this[t]=new this.g(i||this)),t+":"+this[t].u(n)},t.l=function(t,n){return!!this.s||(!this[t="ev_"+t.toLowerCase()]||this[t].apply(this,n))},t.v=function(t){return!!this["ev_"+t.toLowerCase()]},t.g=function(a){var e=[],t=function(){for(var t=!0,n=0;n<e.length;n++)if(e[n]){var i=e[n].apply(a,arguments);t=t&&i}return t};return t.u=function(t){return"function"==typeof t&&e.push(t)-1},t._=function(t){e[t]=null},t},t.detachEvent=function(t){if(t){var n=t.split(":");this[n[0]]._(n[1])}},t.p=function(){for(var t in this)0===t.indexOf("ev_")&&delete this[t]},t=null},m:function(t){var n,i,a;if(t&&"object"==typeof t){for(a={},i=[Array,Date,Number,String,Boolean],n=0;n<i.length;n++)t instanceof i[n]&&(a=n?new i[n](t):new i[n]);for(n in t)Object.prototype.hasOwnProperty.apply(t,[n])&&(a[n]=gantt.m(t[n]))}return a||t},k:function(t,n,i){for(var a in n)(!t[a]||i)&&(t[a]=n[a]);return t},D:function(t){return void 0!==t},M:function(){return this.S||(this.S=(new Date).valueOf()),this.S++,this.S},bind:function(t,n){return t.bind?t.bind(n):function(){return t.apply(n,arguments)}}},function(){function o(t){var n=!1,i=!1;if(window.getComputedStyle){var a=window.getComputedStyle(t,null);n=a.display,i=a.visibility}else t.currentStyle&&(n=t.currentStyle.display,i=t.currentStyle.visibility);return"none"!=n&&"hidden"!=i}gantt.T=function(t){for(var n=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),i=Array.prototype.slice.call(n,0),a=0;a<i.length;a++){var e=i[a];(h=e,(!isNaN(h.getAttribute("tabindex"))&&0<=1*h.getAttribute("tabindex")||(!{input:!0,select:!0,A:!0,button:!0,object:!0}[(s=e).nodeName.toLowerCase()]||!s.hasAttribute("disabled"))||(!{a:!0,I:!0}[(r=e).nodeName.C()]||!!r.getAttribute("href")))&&o(e))||(i.splice(a,1),a--)}var r,s,h;return i}}(),gantt.L=function(t){var n=0,i=0;if(t.getBoundingClientRect){var a=t.getBoundingClientRect(),e=document.body,r=document.documentElement,s=window.pageYOffset||r.scrollTop||e.scrollTop,h=window.pageXOffset||r.scrollLeft||e.scrollLeft,o=r.clientTop||e.clientTop||0,g=r.clientLeft||e.clientLeft||0;return n=a.top+s-o,i=a.left+h-g,{y:Math.round(n),x:Math.round(i),width:t.offsetWidth,height:t.offsetHeight}}for(;t;)n+=parseInt(t.offsetTop,10),i+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:n,x:i,width:t.offsetWidth,height:t.offsetHeight}},gantt.B=function(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),n},window.P&&(dhtmlx.U||(dhtmlx.U={}),dhtmlx.U.R=function(t,n,i){var a=document.createElement("DIV");i=i||window.j,a.id="gantt_"+i.M(),a.style.width="100%",a.style.height="100%",a.cmp="grid",document.body.appendChild(a),this.H(a.id),this.O="gantt",this.N=i;var e=this.F[this.G];(e.V=i).init(a.id,t,n),a.firstChild.style.border="none",e.X=a.id,e.Y=a;return this.F[this.W()].V}),void 0!==window.q&&(dhtmlXCellObject.prototype.R=function(t,n,i){i=i||window.j;var a=document.createElement("DIV");return a.id="gantt_"+i.M(),a.style.width="100%",a.style.height="100%",a.cmp="grid",document.body.appendChild(a),this.H(a.id),this.O="gantt",(this.N=i).init(a.id,t,n),a.firstChild.style.border="none",a=null,this.l("_onContentAttach",[]),this.N}),gantt.i(gantt),gantt.J||(gantt.J={}),gantt.J||(gantt.J={}),gantt.$||(gantt.$={}),gantt.k(gantt.J,{links:{K:"0",Z:"1",tt:"2",nt:"3"},types:{it:"task",at:"project",et:"milestone"},rt:"day",st:!1,ht:!1,ot:!1,gt:!1,ut:0,ct:!0,ft:!0,dt:!1,lt:!1,vt:!1,_t:!0,pt:!0,wt:36e5,kt:"%d-%m-%Y %H:%i",bt:"%d-%m-%Y %H:%i",xt:!0,yt:!1,Dt:!0,Mt:!1,St:!0,Tt:!0,At:!0,It:!1,Et:"%Y-%m-%d",Ct:!0,Lt:!0,Bt:!0,Pt:!0,zt:{resize:"resize",Ut:"progress",move:"move",Rt:"ignore"},jt:!0,Ht:20,Ot:0,Nt:!1,columns:[{name:"text",Ft:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:"44"}],step:1,Gt:"day",Vt:!0,Xt:[],Yt:!1,Wt:60,qt:1,Jt:"%d %M",$t:"%d %F %Y",Kt:"%H:%i",Qt:"task_id",Zt:"link_id",tn:"data-layer",nn:["gantt_save_btn","gantt_cancel_btn"],in:{an:"gantt_save_btn",en:"gantt_cancel_btn",rn:"gantt_delete_btn"},sn:["gantt_delete_btn"],hn:{on:[{name:"description",height:70,gn:"text",type:"textarea",focus:!0},{name:"time",type:"duration",gn:"auto"}],un:[{name:"description",height:70,gn:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",gn:"type"},{name:"time",type:"duration",It:!0,gn:"auto"}],cn:[{name:"description",height:70,gn:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",gn:"type"},{name:"time",type:"duration",fn:!0,gn:"auto"}]},dn:!0,sort:!1,ln:!0,vn:!0,_n:!0,pn:100,mn:!1,wn:!1,kn:"full",bn:70,xn:70,yn:"column_index",Dn:"grid_resizer",Mn:!1,Sn:!1,Tn:!0,An:"readonly",In:"editable",En:{},Cn:!1,Ln:!0,Bn:!1,Pn:!0,zn:!0,Un:!0}),gantt.keys={Rn:13,jn:27},gantt.Hn=function(t,n,i){var a=this.On||{};i=i||t,this.J[t]&&a[i]!=this.J[t]&&(n&&this.$[i]||(this.$[i]=this.Fn.Nn(this.J[t]),a[i]=this.J[t])),this.On=a},gantt.Gn=function(){var t=gantt.locale.labels;t.Vn=t.Xn,t.Yn=t.Wn,t.qn=t.Jn;var n=this.Fn.Nn,i=this.J;gantt.Hn("date_scale",!0),gantt.Hn("date_grid",!0,"grid_date_format"),gantt.Hn("task_date",!0),gantt.k(this.$,{kt:this.Fn.$n(i.kt,i.yt),Kn:n(i.kt,i.yt),bt:this.Fn.$n(i.bt),Qn:function(t,n,i){return""},Zn:function(t,n){return""},ti:function(t,n,i){return i.text},ni:function(t,n,i){return""},ii:function(t,n,i){return""},ai:function(t,n,i){return""},ei:function(t,n){return""},ri:function(t){return""},si:function(t){return""},hi:function(t){return"<div class='gantt_tree_indent'></div>"},oi:function(t){return"<div class='gantt_tree_icon gantt_folder_"+(t.gi?"open":"closed")+"'></div>"},ui:function(t){return"<div class='gantt_tree_icon gantt_file'></div>"},ci:function(t){return"<div class='gantt_tree_icon gantt_"+(t.gi?"close":"open")+"'></div>"},fi:function(t){return"<div class='gantt_tree_icon gantt_blank'></div>"},Et:function(t,n){return n&&gantt.di(n)&&gantt.J.Tn?gantt.$.li(n):gantt.$.vi(t)},_i:function(t,n,i){return gantt.di(i)&&gantt.J.Tn?gantt.$.li(i):gantt.$.$t(t)+" - "+gantt.$.$t(n)},li:function(t){return""},Kt:n(i.Kt),pi:function(t){return""},mi:function(t){var n=gantt.wi(t.source),i=gantt.wi(t.target);return"<b>"+n.text+"</b> &ndash;  <b>"+i.text+"</b>"},ki:function(t,n,i,a){t=gantt.wi(t);var e=gantt.locale.labels,r="<b>"+t.text+"</b> "+(n?e.bi:e.xi)+"<br/>";return i&&(r+="<b> "+(i=gantt.wi(i)).text+"</b> "+(a?e.bi:e.xi)+"<br/>"),r},yi:function(t,n,i,a){var e="";return t&&i&&(e=" "+(gantt.Di(t,i,n,a)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+e},Mi:gantt.Fn.Nn("%Y-%m-%d"),Si:function(t,n,i){return"<b>Task:</b> "+i.text+"<br/><b>Start date:</b> "+gantt.$.Mi(t)+"<br/><b>End date:</b> "+gantt.$.Mi(n)}}),this.l("onTemplatesReady",[])},gantt.Ti={},gantt.Ai={},gantt.Ii={},gantt.Ei=function(t){var n=(t=t||window.event).target||t.srcElement,i=gantt.Ci(t),a=!0;if(null!==i?a=!gantt.v("onTaskClick")||gantt.l("onTaskClick",[i,t]):gantt.l("onEmptyClick",[t]),a){if(!gantt.Li(t,n,gantt.Ti,i))return;i&&gantt.wi(i)&&gantt.J.St&&gantt.Bi(i)}},gantt.Pi=function(t){var n=(t=t||window.event).target||t.srcElement,i=gantt.Ci(n),a=gantt.Ci(n,gantt.J.Zt),e=!gantt.v("onContextMenu")||gantt.l("onContextMenu",[i,a,t]);return e||(t.preventDefault?t.preventDefault():t.returnValue=!1),e},gantt.Li=function(t,n,i,a){for(var e=!0;n;){var r=gantt.zi(n);if(r){r=r.split(" ");for(var s=0;s<r.length;s++)if(r[s]&&i[r[s]]){var h=i[r[s]].call(gantt,t,a,n);e=e&&!(void 0!==h&&!0!==h)}}n=n.parentNode}return e},gantt.Ui=function(t){var n=(t=t||window.event).target||t.srcElement,i=gantt.Ci(t),a=!gantt.v("onTaskDblClick")||gantt.l("onTaskDblClick",[i,t]);if(a){if(!gantt.Li(t,n,gantt.Ai,i))return;null!==i&&gantt.wi(i)&&a&&gantt.J.vn&&gantt.Ri(i)}},gantt.ji=function(t){if(gantt.v("onMouseMove")){var n=gantt.Ci(t);gantt.Hi=t,gantt.l("onMouseMove",[n,t])}},gantt.Oi=function(n,i){this.Ni=n,i&&(this.Fi=i),gantt.i(this),this.Gi(),this.Vi=null,gantt.attachEvent("onGanttScroll",gantt.bind(function(t,n){this.Xi()},this)),gantt.event(n,this.Wi.Yi,gantt.bind(function(t){i.qi={target:t.target||t.srcElement},gantt.J.Ji?(this.Xi(),this.Vi=setTimeout(gantt.bind(function(){this.$i(n,t)},this),gantt.J.Ki)):this.$i(n,t)},this)),gantt.event(document.body,this.Wi.Qi,gantt.bind(function(t){this.Xi()},this))},gantt.Oi.prototype={Zi:function(n){var i=gantt.bind(function(t){return this.ta(n,t)},this),a=(gantt.bind(function(t){return this.na(n,t)},this),gantt.bind(function(t){return t&&t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!(!gantt.D(this.J.ia)||gantt.aa(this,this.J.ia))||i(t)},this)),e=gantt.bind(function(t){return gantt.t(document.body,this.Wi.move,a),gantt.t(document.body,this.Wi.Qi,e),this.ea(n)},this);gantt.event(document.body,this.Wi.move,a),gantt.event(document.body,this.Wi.Qi,e)},ra:function(t){var n=t.x-this.J.sa.x,i=t.y-this.J.sa.y;return Math.sqrt(Math.pow(Math.abs(n),2)+Math.pow(Math.abs(i),2))>this.J.ha},oa:function(){var t=this.J.marker=document.createElement("div");t.className="gantt_drag_marker",t.innerHTML="Dragging object",document.body.appendChild(t)},ga:function(t){if(gantt.J.Ji){var n=this.ua(t),i=n.target||n.srcElement,a=i.cloneNode(!0);this.J.qi={target:a},(this.J.ca=i).parentNode.appendChild(a),i.style.display="none",document.body.appendChild(i)}},Gi:function(){var t=this.Wi={move:"mousemove",Yi:"mousedown",Qi:"mouseup"};this.ua=function(t){return t},gantt.J.Ji&&(window.navigator.msPointerEnabled?(t.move="MSPointerMove",t.Yi="MSPointerDown",t.Qi="MSPointerUp",this.ua=function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t}):(t.move="touchmove",t.Yi="touchstart",t.Qi="touchend",this.ua=function(t){return t.touches&&1<t.touches.length?null:t.touches[0]?{target:document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY),pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t}))},Xi:function(){this.Vi&&(clearTimeout(this.Vi),this.Vi=null)},$i:function(t,n){this.J={fa:t,marker:null,da:!1,sa:this.la(n),ha:4},this.Fi&&gantt.k(this.J,this.Fi,!0),this.Zi(t),gantt.va=!0,document.body.className+=" gantt_noselect",gantt.J.Ji&&this.ta(t,n)},ta:function(t,n){var i=this.ua(n);if(i){if(!this.J.marker&&!this.J.da){var a=this.la(i);if(gantt.J.Ji||this.ra(a)){if(this.J.da=!0,(this.J.Rt=!1)===this.l("onBeforeDragStart",[t,this.J.qi]))return this.J.Rt=!0;this.ga(n),this.oa(),gantt._a(),this.l("onAfterDragStart",[t,this.J.qi])}else this.J.Rt=!0}return this.J.Rt?void 0:(i.sa=this.la(i),this.J.marker.style.left=i.sa.x+"px",this.J.marker.style.top=i.sa.y+"px",this.l("onDragMove",[t,i]),!1)}},ea:function(t){var n=this.J.ca;n&&n.parentNode&&n.parentNode.removeChild(n),gantt.va=!1,this.J.marker&&(this.J.marker.parentNode.removeChild(this.J.marker),this.J.marker=null,this.l("onDragEnd",[])),document.body.className=document.body.className.replace(" gantt_noselect","")},la:function(t){var n=0,i=0;return(t=t||window.event).pageX||t.pageY?(n=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(n=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:i}}},gantt.pa=function(){this.Ti.ma=this.bind(function(t,n,i){return this.close(n),!1},this),this.Ti.wa=this.bind(function(t,n,i){return this.open(n),!1},this),this.Ti.ka=this.bind(function(t,n,i){if(null!==n){var a=this.wi(n);this.J.Tt&&this.ba(a.xa),this.l("onTaskRowClick",[n,i])}},this),this.Ti.ya=this.bind(function(t,n,i){var a=i.getAttribute("column_id");if(this.l("onGridHeaderClick",[a,t])){if("add"==a)return void this.Ti.Da(t,this.J.Ot);if(this.J.sort){for(var e,r=a,s=0;this.J.columns.length;s++)if(this.J.columns[s].name==a){e=this.J.columns[s];break}if(e&&void 0!==e.sort&&!0!==e.sort&&!(r=e.sort))return;var h=this.Ma&&this.Ma.direction&&this.Ma.name==a?this.Ma.direction:"desc";h="desc"==h?"asc":"desc",this.Ma={name:a,direction:h},this.sort(r,"desc"==h)}}},this),!this.J.sort&&this.J.mn&&this.Sa(),this.Ti.Da=this.bind(function(t,n,i){if(!this.J.It){return this.Ta({},n||this.J.Ot),!1}},this),this.Aa&&this.Aa()},gantt.Ia=function(){this.Ea(),this.Ca()&&this.La()},gantt.Ea=function(){for(var t=this.Ba(),n=0,i=[],a=[],e=0;e<t.length;e++){var r=parseInt(t[e].width,10);window.isNaN(r)&&(r=50,i.push(e)),n+=a[e]=r}if(this.J.Nt||i.length){var s=this.Pa()-n;if(0<i.length?i.length:0<a.length&&a.length,0<i.length){var h=s/(i.length?i.length:1);for(e=0;e<i.length;e++){a[i[e]]+=h}}else for(h=s/(a.length?a.length:1),e=0;e<a.length;e++)a[e]+=h;for(e=0;e<a.length;e++)t[e].width=a[e]}else this.J.za=n},gantt.La=function(){for(var t=this.Ba(),n=[],i=0,a=this.locale.labels,e=this.J.Ua-2,r=0;r<t.length;r++){var s=r==t.length-1,h=t[r],o=1*h.width;s&&this.Pa()>i+o&&(h.width=o=this.Pa()-i),i+=o;var g=this.Ma&&h.name==this.Ma.name?"<div class='gantt_sort gantt_"+this.Ma.direction+"'></div>":"",u=["gantt_grid_head_cell","gantt_grid_head_"+h.name,s?"gantt_last_cell":"",this.$.Zn(h.name,h)].join(" "),c="width:"+(o-(s?1:0))+"px;",f=h.label||a["column_"+h.name];f=f||"";var d="<div class='"+u+"' style='"+c+"' "+this.ja.Ra(h,f)+" column_id='"+h.name+"'>"+f+g+"</div>";n.push(d)}this.Ha.style.height=this.J.Ua-1+"px",this.Ha.style.lineHeight=e+"px",this.Ha.style.width=i-1+"px",this.Ha.innerHTML=n.join("")},gantt.Oa=function(t){if(!gantt.Ca())return null;for(var n=this.Ba(),i=[],a=0;a<n.length;a++){var e,r,s,h=a==n.length-1,o=n[a];if("add"==o.name)r="<div "+this.ja.Na(o)+" class='gantt_add'></div>",s="";else(r=o.Fa?o.Fa(t):t[o.name])instanceof Date&&(r=this.$.Et(r,t)),r="<div class='gantt_tree_content'>"+(s=r)+"</div>";var g="gantt_cell"+(h?" gantt_last_cell":""),u="";if(o.Ft){for(var c=0;c<t.Ga;c++)u+=this.$.hi(t);this.Va(t.id)?(u+=this.$.ci(t),u+=this.$.oi(t)):(u+=this.$.fi(t),u+=this.$.ui(t))}var f="width:"+(o.width-(h?1:0))+"px;";this.D(o.align)&&(f+="text-align:"+o.align+";"),e="<div class='"+g+"' style='"+f+"' "+this.ja.Xa(o,s)+">"+u+r+"</div>",i.push(e)}g=gantt.Ya(t.id)%2==0?"":" odd";if(g+=t.Wa?" gantt_transparent":"",g+=t.qa?" "+t.qa:"",this.$.ii){var d=this.$.ii.call(this,t.xa,t.Ja,t);d&&(g+=" "+d)}this.Ka().$a==t.id&&(g+=" gantt_selected");var l=document.createElement("div");return l.className="gantt_row"+g,l.style.height=this.J.Qa+"px",l.style.lineHeight=gantt.J.Qa+"px",l.setAttribute(this.J.Qt,t.id),this.ja.Za(t,l),l.innerHTML=i.join(""),l},gantt.open=function(t){gantt.te(t,!0),this.l("onTaskOpened",[t])},gantt.close=function(t){gantt.te(t,!1),this.l("onTaskClosed",[t])},gantt.te=function(t,n){t&&this.ne[t]&&(this.ne[t].gi=n,gantt.ie(t))},gantt.ie=function(t){this.ae()},gantt.Ca=function(){return this.J.za&&this.J.pt},gantt.Pa=function(){return this.Ca()?this.ee()?this.J.za:this.re:0},gantt.se=function(t,n,i){var a=arguments[3];if(a){if(a===t)return;i=this.he(a),n=this.oe(a)}if(t!=i){i=i||this.J.Ot;var e=this.wi(t),r=this.he(e.id),s=(this.ge(this.he(e.id)),this.ge(i));if(-1==n&&(n=s.length+1),r==i)if(this.oe(t)==n)return;if(!1!==this.l("onBeforeTaskMove",[t,i,n])){this.ue(r,t),(s=this.ge(i))[n]?s=s.slice(0,n).concat([t]).concat(s.slice(n)):s.push(t),this.ce(e,i),this.fe[i]=s;var h=this.de(e)-e.Ga;e.Ga+=h;for(var o=this.le(t),g=0;g<o.length;g++){this.ne[o[g]].Ga+=h}0<1*n?e.ve=a?(this.oe(t)>this.oe(a)?"next:":"")+a:"next:"+gantt._e(t):s[1*n+1]?e.ve=s[1*n+1]:e.ve=i,this.l("onAfterTaskMove",[t,i,n])&&this.ae()}}},gantt.Sa=function(){var d=new gantt.Oi(this.pe,{ia:60});this.D(this.J.me)&&(d.J.ha=this.J.me),d.attachEvent("onBeforeDragStart",this.bind(function(t,n){if(!this.we(n))return!1;this.ke&&this.be();var i=this.Ci(n),a=gantt.wi(i);return!gantt.xe(a)&&(d.J.ye=a.gi,!!this.l("onRowDragStart",[i,n.target||n.srcElement,n])&&void 0)},this)),d.attachEvent("onAfterDragStart",this.bind(function(t,n){var i=this.we(n);d.J.marker.innerHTML=i.outerHTML,d.J.id=this.Ci(n);var a=this.wi(d.J.id);d.J.index=this.oe(d.J.id),d.J.parent=a.parent,a.gi=!1,a.Wa=!0,this.ae()},this)),d.De=function(t){for(var n=gantt.Me,i=gantt.ne,a=null,e=0,r=n.length;e<r;e++)i[n[e]].Ga==t&&(a=i[n[e]]);return a?a.id:null},d.Se=this.bind(function(t){var n=this.L(this.pe),i=n.x,a=t.sa.y-10;a<n.y&&(a=n.y);var e=gantt.Te()*gantt.J.Qa;return a>n.y+e-this.J.Qa&&(a=n.y+e-this.J.Qa),n.x=i,n.y=a,n},this),d.Ae=this.bind(function(t){var n=this.L(this.pe),i=t.pageY-n.y+gantt.Ie().y;return i<0&&(i=0),i},this),d.Ee=this.bind(function(t,n){t=t||0,gantt.J.Ce&&(t+=this.pe.scrollTop);var i=Math.floor(t/this.J.Qa);return(i=n<i?i-1:i)>this.Me.length-1?null:this.Me[i]},this),d.attachEvent("onDragMove",this.bind(function(t,n){function i(t,n){return!gantt.Le(o.id,n.id)&&(t.Ga==n.Ga||gantt.J.wn)}var a=d.J,e=d.Se(n);a.marker.style.left=e.x+10+"px",a.marker.style.top=e.y+"px";var r=this.wi(d.J.id),s=d.Ae(n),h=d.Ee(s,gantt.Ya(r.id));if(this.Be(h)||(h=d.De(gantt.J.wn?r.Ga:0))==d.J.id&&(h=null),this.Be(h)){var o=this.wi(h);if(gantt.Ya(o.id)*this.J.Qa+this.J.Qa/2<s){var g=this.Ya(o.id),u=this.ne[this.Me[g+1]];if(u){if(u.id==r.id)return this.J.wn&&this.Le(r.id,o.id)&&1==this.ge(o.id).length?void this.se(r.id,this.oe(o.id)+1,this.he(o.id)):void 0;o=u}else if(i(u=this.ne[this.Me[g]],r)&&u.id!=r.id)return void this.se(r.id,-1,this.he(u.id))}else if(this.J.wn&&o.id!=r.id&&i(o,r)){if(!this.Pe(o.id))return void this.se(r.id,-1,o.id);if(this.Ya(o.id))return}g=this.Ya(o.id);for(var c=this.ne[this.Me[g-1]],f=1;(!c||c.id==o.id)&&0<=g-f;)c=this.ne[this.Me[g-f]],f++;if(r.id==o.id)return;i(o,r)&&r.id!=o.id?this.se(r.id,0,0,o.id):o.Ga!=r.Ga-1||gantt.ge(o.id).length?c&&i(c,r)&&r.id!=c.id&&this.se(r.id,-1,this.he(c.id)):this.se(r.id,0,o.id)}return!0},this)),d.attachEvent("onDragEnd",this.bind(function(){var t=this.wi(d.J.id);t.Wa=!1,t.gi=d.J.ye,!1===this.l("onBeforeRowDragEnd",[d.J.id,d.J.parent,d.J.index])?(this.se(d.J.id,d.J.index,d.J.parent),t.ve=null):this.l("onRowDragEnd",[d.J.id,t.ve]),this.ae()},this))},gantt.Ba=function(){return this.J.columns},gantt.Va=function(t){return 0<this.ge(t).length},function(){function s(t){return(t+"").replace(n," ").replace(i," ")}var n=new RegExp("<(?:.|\n)*?>","gm"),i=new RegExp(" +","gm"),e=new RegExp("'","gm");for(var t in gantt.ja={ze:function(t){var n=[" "];for(var i in t){var a=(s(t[i])+"").replace(e,"&#39;");n.push(i+"='"+a+"'")}return n.push(" "),n.join(" ")},Ue:function(t){return gantt.ja.ze({Re:t})},je:function(t,n){n.setAttribute("aria-label",s(gantt.$.Si(t.xa,t.Ja,t))),gantt.xe(t)&&n.setAttribute("aria-readonly",!0),t.qa&&n.setAttribute("aria-busy",!0),n.setAttribute("aria-selected",gantt.Ka().$a==t.id||gantt.He&&gantt.He(t.id)?"true":"false")},Oe:function(t,n){this.je(t,n),!gantt.xe(t)&&gantt.J.Pt&&(t.id!=gantt.Ka().Ne?n.setAttribute("aria-grabbed",!1):n.setAttribute("aria-grabbed",!0))},Za:function(t,n){this.je(t,n),!gantt.xe(t)&&gantt.J.mn&&n.setAttribute("aria-grabbed",!1),n.setAttribute("role","row"),n.setAttribute("aria-level",t.Ga),gantt.Va(t.id)&&n.setAttribute("aria-expanded",t.gi?"true":"false")},Fe:function(t,n){var i=gantt.J.links,a=t.type==i.K||t.type==i.Z,e=t.type==i.Z||t.type==i.nt,r=gantt.locale.labels.link+" "+gantt.$.ki(t.source,e,t.target,a);n.setAttribute("aria-label",s(r)),gantt.xe(t)&&n.setAttribute("aria-readonly",!0)},Ge:function(t){t.setAttribute("role","separator")},Ve:function(t){t.setAttribute("aria-hidden","true")},Xe:function(t){t.setAttribute("aria-hidden","false")},Ye:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},We:function(t){return this.ze({qe:"button",Re:gantt.locale.labels[t],Je:"0"})},$e:function(t,n){t.setAttribute("aria-label",n)},Ke:function(t){var n="";switch(t){case"%Y":n=gantt.locale.labels.Qe;break;case"%m":n=gantt.locale.labels.Ze;break;case"%d":n=gantt.locale.labels.tr;break;case"%H:%i":n=gantt.locale.labels.nr+gantt.locale.labels.ir}return gantt.ja.ze({Re:n})},ar:function(t){return this.ze({Re:gantt.locale.labels.er,rr:"0"})},sr:function(){return[" role='treegrid'",gantt.J.hr?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},or:function(){return"role='row'"},Ra:function(t,n){var i="";if("add"==t.name)i=this.ze({qe:"button",Re:gantt.locale.labels.gr});else{var a={qe:"columnheader",Re:n};gantt.Ma&&gantt.Ma.name==t.name&&("asc"==gantt.Ma.direction?a["ur"]="ascending":a["ur"]="descending"),i=this.ze(a)}return i},cr:function(){return"role='rowgroup'"},Xa:function(t,n){return this.ze({qe:"gridcell",Re:n})},Na:function(t){return this.ze({qe:"button",Re:gantt.locale.labels.gr})},dr:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},lr:function(t){t.setAttribute("role","alert")},vr:function(t,n){t.setAttribute("role","dialog"),n&&t.setAttribute("aria-labelledby",n)},_r:function(t){t.setAttribute("role","dialog")},pr:function(){return" role='heading' "},mr:function(t,n){t.setAttribute("aria-label",n)},wr:function(t){return gantt.ja.ze({qe:"button",Re:t,Je:"0"})},kr:function(t){t.setAttribute("role","tooltip")},br:function(t){t.setAttribute("aria-hidden","false")},xr:function(t){t.setAttribute("aria-hidden","true")}},gantt.ja)gantt.ja[t]=function(t){return function(){return gantt.J.zn?t.apply(this,arguments):""}}(gantt.ja[t])}(),gantt.yr={Dr:function(t,n,i){void 0===i&&(i=t.length-1),void 0===n&&(n=0);for(var a=0,e=n;e<=i;e++)a+=t[e];return a},Mr:function(t,n,i,a){var e=n.width;void 0===a&&(a=e.length-1),void 0===i&&(i=0);var r=a-i+1;if(!(i>e.length-1||r<=0||a>e.length-1)){var s=t-this.Dr(e,i,a);this.Sr(s,e,i,a),this.Sr(-s,e,a+1),n.Tr=this.Dr(e)}},Ar:function(t,n){for(var i=[],a=0;a<n;a++)i[a]=0;return this.Sr(t,i),i},Sr:function(t,n,i,a){i||(i=0),void 0===a&&(a=n.length-1);for(var e=a-i+1,r=this.Dr(n,i,a),s=i;s<=a;s++){var h=Math.floor(t*(r?n[s]/r:1/e));r-=n[s],t-=h,e--,n[s]+=h,h}n[n.length-1]+=t},Ir:function(t){function i(t,n){var i=new Date(1970,0,1);return gantt.Fn.add(i,n,t)-i}t.sort(function(t,n){return i(t.Er,t.step)<i(n.Er,n.step)?1:i(t.Er,t.step)>i(n.Er,n.step)?-1:0});for(var n=0;n<t.length;n++)t[n].index=n},Cr:function(){return gantt.Hn("date_scale"),{Er:gantt.J.Gt,step:gantt.J.step,Fa:gantt.$.Jt,Fn:gantt.J.Jt,Lr:gantt.$.ri}},Br:function(t,n,i,a){for(var e=this.Ar(a,t.length),r=i,s=[],h=t.length-1;0<=h;h--){var o=h==t.length-1,g=this.Pr(t[h]);o&&this.zr(g),this.Ur(g,n,r,e[h]),this.Rr(g),o&&(r=g.Tr),s.unshift(g)}for(h=0;h<s.length-1;h++)this.jr(s[s.length-1],s[h]);for(h=0;h<s.length;h++)this.Hr(s[h]);return s},Hr:function(t){for(var n=0,i=t.Or.length;n<i;n++)t.left.push((t.width[n-1]||0)+(t.left[n-1]||0))},Nr:function(t,n){if(this.J.ot){for(var i=!0,a=t,e=0;e<n.step;e++)e&&(a=gantt.Fn.add(t,e,n.Er)),i=i&&!this.Fr(a,n.Er);return i}return!1},zr:function(t){t.Gr={},t.Vr=t.count},Ur:function(t,n,i,a){var e=i;t.height=a;var r=void 0===t.Vr?t.count:t.Vr;r||(r=1),t.Xr=Math.floor(e/r),n&&t.Xr<n&&(t.Xr=n,e=t.Xr*r),t.width=[];for(var s=t.Gr||{},h=0;h<t.Or.length;h++)s[t.Or[h].valueOf()]||t.Vr==t.count?t.width[h]=0:t.width[h]=1;this.Sr(e-this.Dr(t.width),t.width),t.Tr=this.Dr(t.width)},Pr:function(t){var n=gantt.k({count:0,Xr:0,Tr:0,height:0,width:[],left:[],Or:[],Yr:{}},t);return this.Wr(t.Er,t.step,function(t){n.count++,n.Or.push(new Date(t)),n.Yr[t.valueOf()]=n.Or.length-1}),n},qr:function(t,n,i,a,e){for(var r=n.Or,s=t.Or,h=i||0,o=a||s.length-1,g=0,u=1;u<r.length;u++){var c=t.Yr[+r[u]];void 0!==c&&c<=o&&(e&&e.apply(this,[g,u,h,c]),h=c,g=u)}},jr:function(r,s,t,n){this.qr(r,s,t,n,function(t,n,i,a){var e=this.Dr(r.width,i,a-1);this.Dr(s.width,t,n-1)!=e&&this.Mr(e,s,t,n-1)})},Wr:function(t,n,i){var a=new Date(gantt.Jr),e=new Date(gantt.$r);gantt.Fn[t+"_start"]&&(a=gantt.Fn[t+"_start"](a));var r=new Date(a);for(+e<=+r&&(e=gantt.Fn.add(r,n,t));+r<+e;){i.call(this,new Date(r));var s=r.getTimezoneOffset();r=gantt.Fn.add(r,n,t),r=gantt.Kr(r,s,n,t),gantt.Fn[t+"_start"]&&(r=gantt.Fn[t+"_start"](r))}},Rr:function(t){var n=t.Or,i=t.width.length-1,a=0;if(+n[0]<+gantt.Jr&&0!=i){var e=Math.floor(t.width[0]*((n[1]-gantt.Jr)/(n[1]-n[0])));a+=t.width[0]-e,t.width[0]=e,n[0]=new Date(gantt.Jr)}var r=n.length-1,s=n[r],h=gantt.Fn.add(s,t.step,t.Er);if(+h>+gantt.$r&&0<r){e=t.width[r]-Math.floor(t.width[r]*((h-gantt.$r)/(h-s)));a+=t.width[r]-e,t.width[r]=e}if(a){for(var o=this.Dr(t.width),g=0,u=0;u<t.width.length;u++){var c=Math.floor(a*(t.width[u]/o));t.width[u]+=c,g+=c}this.Sr(a-g,t.width)}}},gantt.Qr={Zr:null,ts:{ns:{},as:{},es:{}},rs:{},init:function(){this.ss();var t=gantt.J.zt;this.hs();var n={ns:"onBeforeTaskDrag",as:"onBeforeTaskChanged",es:"onAfterTaskDrag"};for(var i in this.ts)for(var a in t)this.ts[i][a]=n[i];this.rs[t.move]=this.os,this.rs[t.resize]=this.gs,this.rs[t.Ut]=this.us},hs:function(){var t=gantt.cs;gantt.event(t,"mousemove",gantt.bind(function(t){this.fs(t||event)},this)),gantt.event(t,"mousedown",gantt.bind(function(t){this.ds(t||event)},this)),gantt.event(t,"mouseup",gantt.bind(function(t){this.ls(t||event)},this))},ss:function(){this.Zr={id:null,mode:null,sa:null,vs:null,_s:null,fa:null,left:null}},gs:function(t,n,i){var a=gantt.J,e=this.ps(t,i);i.left?(t.xa=gantt.ms(e.start+n),t.xa||(t.xa=new Date(gantt.Ka().ws))):(t.Ja=gantt.ms(e.end+n),t.Ja||(t.Ja=new Date(gantt.Ka().ks))),t.Ja-t.xa<a.wt&&(i.left?t.xa=gantt.bs(t.Ja,-1):t.Ja=gantt.bs(t.xa,1)),gantt.xs(t)},us:function(t,n,i){var a=this.ps(t,i),e=Math.max(0,i.sa.x-a.start);t.Ut=Math.min(1,e/(a.end-a.start))},os:function(t,n,i){var a=this.ps(t,i),e=gantt.ms(a.start+n),r=gantt.ms(a.end+n);e?r?(t.xa=e,t.Ja=r):(t.Ja=new Date(gantt.Ka().ks),t.xa=gantt.ms(gantt.ys(t.Ja)-(a.end-a.start))):(t.xa=new Date(gantt.Ka().ws),t.Ja=gantt.ms(gantt.ys(t.xa)+(a.end-a.start)))},ps:function(t,n){return{start:n.Ds=n.Ds||gantt.ys(t.xa),end:n.Ms=n.Ms||gantt.ys(t.Ja)}},fs:function(t){if(this.Zr.Ss&&this.Ts(t),this.Zr.mode){if(!gantt.aa(this,40))return;this.As(t)}},As:function(t){var n=this.Zr;if(n.mode){var i=gantt.Is(t);if(n.sa&&n.sa.x==i.x)return;n.sa=i;var a=gantt.ms(i.x);if(!a||isNaN(a.getTime()))return;var e=i.x-n.vs,r=gantt.wi(n.id);if(this.rs[n.mode]){var s=gantt.k({},r),h=gantt.k({},r);this.rs[n.mode].apply(this,[h,e,n]),gantt.k(r,h,!0),gantt.l("onTaskDrag",[r.id,n.mode,h,s,t]),gantt.k(r,h,!0),gantt.Es(n.id),gantt.Cs(n.id)}}},ds:function(t,n){if(2!=t.button){var i=gantt.Ci(t),a=null;if(gantt.Be(i)&&(a=gantt.wi(i)),!gantt.xe(a)&&!this.Zr.mode){this.ss(),n=n||t.target||t.srcElement;var e=gantt.zi(n);if(!e||!this.Ls(e))return n.parentNode?this.ds(t,n.parentNode):void 0;var r=this.Ls(e);if(r)if(r.mode&&r.mode!=gantt.J.zt.Rt&&gantt.J["drag_"+r.mode]){if(i=gantt.Ci(n),a=gantt.m(gantt.wi(i)||{}),gantt.xe(a))return this.ss(),!1;if(gantt.Bs(a)&&r.mode!=gantt.J.zt.Ut)return void this.ss();r.id=i;var s=gantt.Is(t);r.vs=s.x,r._s=s.y,r.fa=a,this.Zr.Ss=r}else this.ss();else if(gantt.v("onMouseDown")&&gantt.l("onMouseDown",[e.split(" ")[0]])&&n.parentNode)return this.ds(t,n.parentNode)}}},Ps:function(t,n){function i(t){gantt.Fr(t.xa)||(t.xa=gantt.bs(t.xa,-1,gantt.J.rt))}var a,e=gantt.zs.Er,r=gantt.zs.step;gantt.J.jt||(e="minute",r=gantt.J.Wt),n.mode==gantt.J.zt.resize?n.left?(t.xa=gantt.Us({Fn:t.xa,Er:e,step:r}),i(t)):(t.Ja=gantt.Us({Fn:t.Ja,Er:e,step:r}),a=t,gantt.Fr(new Date(a.Ja-1))||(a.Ja=gantt.bs(a.Ja,1,gantt.J.rt))):n.mode==gantt.J.zt.move&&(t.xa=gantt.Us({Fn:t.xa,Er:e,step:r}),i(t),t.Ja=gantt.bs(t.xa,t.duration,gantt.J.rt))},Rs:function(t,n){n=n||{mode:gantt.J.zt.move};gantt.J.st&&gantt.J.ht&&(n.mode==gantt.J.zt.resize?n.left?t.xa=gantt.js({Fn:t.xa,dir:"future"}):t.Ja=gantt.js({Fn:t.Ja,dir:"past"}):n.mode==gantt.J.zt.move&&gantt.Hs(t))},ls:function(t){var n=this.Zr;if(n.mode&&n.id){var i=gantt.wi(n.id);if(gantt.J.st&&gantt.J.ht&&this.Rs(i,n),this.Ps(i,n),gantt.xs(i),this.Os("before_finish",n.mode,[n.id,n.mode,gantt.m(n.fa),t])){var a=n.id;gantt.xs(i),this.ss(),gantt.Ns(i.id),this.Os("after_finish",n.mode,[a,n.mode,t])}else n.fa.Fs=!1,gantt.k(i,n.fa,!0),gantt.Ns(i.id)}this.ss()},Ls:function(t){var n=gantt.J.zt,i=(t||"").split(" "),a={mode:null,left:null};switch(i[0]){case"gantt_task_line":case"gantt_task_content":a.mode=n.move;break;case"gantt_task_drag":a.mode=n.resize,i[1]&&-1!==i[1].indexOf("left",i[1].length-"left".length)?a.left=!0:a.left=!1;break;case"gantt_task_progress_drag":a.mode=n.Ut;break;case"gantt_link_control":case"gantt_link_point":a.mode=n.Rt;break;default:a=null}return a},Ts:function(t){var n=this.Zr=this.Zr.Ss;delete n.Ss;var i=gantt.J,a=n.id;i["drag_"+n.mode]&&gantt.l("onBeforeDrag",[a,n.mode,t])&&this.Os("before_start",n.mode,[a,n.mode,t])?(delete n.Ss,gantt.l("onTaskDragStart",[])):this.ss()},Os:function(t,n,i){gantt.assert(this.ts[t],"Invalid stage:{"+t+"}");var a=this.ts[t][n];return gantt.assert(a,"Unknown after drop mode:{"+n+"}"),gantt.assert(i,"Invalid event arguments"),!gantt.v(a)||gantt.l(a,i)}},gantt.Gs=function(t){var n=gantt.Qr.Zr;n||(n={mode:gantt.J.zt.move}),gantt.Qr.Ps(t,n)},gantt.Vs=function(t){for(var n=this.Xs(t),i=gantt.Ys(),a=0;a<i.length;a++)i[a].Ws(n)},gantt.qs=function(t,n){var i=null;return t&&n?i=gantt.J.links.Z:!t&&n?i=gantt.J.links.K:t||n?t&&!n&&(i=gantt.J.links.nt):i=gantt.J.links.tt,i},gantt.Di=function(t,n,i,a){var e;if(!(e="object"==typeof t?t:{source:t,target:n,type:this.qs(i,a)}))return!1;if(!(e.source&&e.target&&e.type))return!1;if(e.source==e.target)return!1;var r=!0;return this.v("onLinkValidation")&&(r=this.l("onLinkValidation",[e])),r},gantt.Js=function(t){var n=this.Ks.$s(t),i=gantt.Qs,a=i.Zs(n),e=document.createElement("div"),r="gantt_task_link";t.color&&(r+=" gantt_link_inline_color");var s=this.$.pi?this.$.pi(t):"";s&&(r+=" "+s),this.J.th&&this.nh&&this.nh(t)&&(r+=" gantt_critical_link"),e.className=r,e.setAttribute(gantt.J.Zt,t.id);for(var h=0;h<a.length;h++){h==a.length-1&&(a[h].size-=gantt.J.ih);var o=i.ah(a[h],a[h+1]);t.color&&(o.firstChild.style.backgroundColor=t.color),e.appendChild(o)}var g=a[a.length-1].direction,u=gantt.eh(n[n.length-1],g);return t.color&&(u.style.borderColor=t.color),e.appendChild(u),gantt.ja.Fe(t,e),e},gantt.eh=function(t,n){var i=document.createElement("div"),a=gantt.Qs,e=t.y,r=t.x,s=gantt.J.ih,h=gantt.J.Qa,o="gantt_link_arrow gantt_link_arrow_"+n;switch(n){case a.rh.right:e-=(s-h)/2,r-=s;break;case a.rh.left:e-=(s-h)/2;break;case a.rh.Qi:r-=s;break;case a.rh.Yi:e+=2*s,r-=s}return i.style.cssText=["top:"+e+"px","left:"+r+"px"].join(";"),i.className=o,i},gantt.Qs={sh:null,rh:{left:"left",right:"right",Qi:"up",Yi:"down"},path:[],clear:function(){this.sh=null,this.path=[]},hh:function(t){this.sh=gantt.m(t)},Zs:function(t){this.clear(),this.hh(t[0]);for(var n=1;n<t.length;n++)this.oh(t[n]);return this.gh()},oh:function(t){var n=gantt.m(t),i=this.sh,a=this.uh(i,n);this.path.push(a),this.sh=n},gh:function(){return this.path},fh:function(t){var n,i=gantt.J.Ht,a=(gantt.J.dh,t.y+(gantt.J.Qa-i)/2);switch(t.direction){case this.rh.left:n={top:a,height:i,lineHeight:i,left:t.x-t.size-i/2,width:t.size+i};break;case this.rh.right:n={top:a,lineHeight:i,height:i,left:t.x-i/2,width:t.size+i};break;case this.rh.Qi:n={top:a-t.size,lineHeight:t.size+i,height:t.size+i,left:t.x-i/2,width:i};break;case this.rh.Yi:n={top:a,lineHeight:t.size+i,height:t.size+i,left:t.x-i/2,width:i}}return n},lh:function(t){var n,i=gantt.J.dh,a=gantt.J.Ht,e=t.size+i;switch(t.direction){case this.rh.left:case this.rh.right:n={height:i,width:e,marginTop:(a-i)/2,marginLeft:(a-i)/2};break;case this.rh.Qi:case this.rh.Yi:n={height:e,width:i,marginTop:(a-i)/2,marginLeft:(a-i)/2}}return n},ah:function(t){var n=this.fh(t),i=document.createElement("div");i.style.cssText=["top:"+n.top+"px","left:"+n.left+"px","height:"+n.height+"px","width:"+n.width+"px"].join(";"),i.className="gantt_line_wrapper";var a=this.lh(t),e=document.createElement("div");return e.style.cssText=["height:"+a.height+"px","width:"+a.width+"px","margin-top:"+a.marginTop+"px","margin-left:"+a.marginLeft+"px"].join(";"),e.className="gantt_link_line_"+t.direction,i.appendChild(e),i},uh:function(t,n){var i=this.vh(t,n),a={x:t.x,y:t.y,direction:this.vh(t,n)};return i==this.rh.left||i==this.rh.right?a.size=Math.abs(t.x-n.x):a.size=Math.abs(t.y-n.y),a},vh:function(t,n){return n.x<t.x?this.rh.left:n.x>t.x?this.rh.right:n.y>t.y?this.rh.Yi:this.rh.Qi}},gantt._h=function(t){return t*gantt.J.Qa},gantt.Ks={path:[],clear:function(){this.path=[]},ph:function(){return this.path[this.path.length-1]},hh:function(t){return t?(this.path.push(gantt.m(t)),t):this.ph()},mh:function(t,n,i){i=i?{x:i.x,y:i.y}:gantt.m(this.hh());var a=gantt.Qs.rh;switch(t){case a.left:i.x-=n;break;case a.right:i.x+=n;break;case a.Qi:i.y-=n;break;case a.Yi:i.y+=n}return this.hh(i)},$s:function(t){var n=this.wh(t),i=gantt.J,a=n.kh-n.y,e=n.bh-n.x,r=gantt.Qs.rh;this.clear(),this.hh({x:n.x,y:n.y});var s=2*i.ih,h=n.bh>n.x;if(t.type==gantt.J.links.Z)this.mh(r.left,s),h?(this.mh(r.Yi,a),this.mh(r.right,e)):(this.mh(r.right,e),this.mh(r.Yi,a)),this.mh(r.right,s);else if(t.type==gantt.J.links.K)if(h=n.bh>n.x+2*s,this.mh(r.right,s),h)e-=s,this.mh(r.Yi,a),this.mh(r.right,e);else{e-=2*s;var o=0<a?1:-1;this.mh(r.Yi,o*(i.Qa/2)),this.mh(r.right,e),this.mh(r.Yi,o*(Math.abs(a)-i.Qa/2)),this.mh(r.right,s)}else if(t.type==gantt.J.links.tt)this.mh(r.right,s),h?(this.mh(r.right,e),this.mh(r.Yi,a)):(this.mh(r.Yi,a),this.mh(r.right,e)),this.mh(r.left,s);else if(t.type==gantt.J.links.nt)if(h=n.bh>n.x-2*s,this.mh(r.left,s),h){e+=2*s;o=0<a?1:-1;this.mh(r.Yi,o*(i.Qa/2)),this.mh(r.right,e),this.mh(r.Yi,o*(Math.abs(a)-i.Qa/2)),this.mh(r.left,s)}else e+=s,this.mh(r.Yi,a),this.mh(r.right,e);return this.path},wh:function(t){var n=gantt.J.links,i=!1,a=!1;t.type==n.Z?i=a=!0:t.type==n.tt?i=a=!1:t.type==n.K?a=!(i=!1):t.type==n.nt?a=!(i=!0):gantt.assert(!1,"Invalid link type");var e=gantt.xh(gantt.ne[t.source],i),r=gantt.xh(gantt.ne[t.target],a);return{x:e.x,bh:r.x,y:e.y,kh:r.y}}},gantt.yh=function(){function l(t,n,i){var a=gantt.Dh(t,!!n);return a.y+=gantt.Mh()/2,i=i||0,a.x+=(n?-1:1)*i,a}function v(t){var n=p(),i=["gantt_link_tooltip"];n.from&&n.Sh&&(gantt.Di(n.from,n.Sh,n.Th,n.Ah)?i.push("gantt_allowed_link"):i.push("gantt_invalid_link"));var a=gantt.$.yi(n.from,n.Th,n.Sh,n.Ah);a&&i.push(a);var e="<div class='"+a+"'>"+gantt.$.ki(n.from,n.Th,n.Sh,n.Ah)+"</div>";t.innerHTML=e}function p(){return{from:gantt.Ih,Sh:gantt.Eh,Th:gantt.Ch,Ah:gantt.Lh}}function s(){gantt.Ih=gantt.Ch=gantt.Eh=null,gantt.Lh=!0}function _(t,n,i,a){var e=(w.Bh||(w.Bh=document.createElement("div"),gantt.Ph.appendChild(w.Bh)),w.Bh),r=p(),s=["gantt_link_direction"];gantt.$.zh&&s.push(gantt.$.zh(r.from,r.Th,r.Sh,r.Ah));var h=Math.sqrt(Math.pow(i-t,2)+Math.pow(a-n,2));if(h=Math.max(0,h-3)){e.className=s.join(" ");var o=(a-n)/(i-t),g=Math.atan(o);2==m(t,i,n,a)?g+=Math.PI:3==m(t,i,n,a)&&(g-=Math.PI);var u=Math.sin(g),c=Math.cos(g),f=Math.round(n),d=Math.round(t),l=["-webkit-transform: rotate("+g+"rad)","-moz-transform: rotate("+g+"rad)","-ms-transform: rotate("+g+"rad)","-o-transform: rotate("+g+"rad)","transform: rotate("+g+"rad)","width:"+Math.round(h)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){l.push('-ms-filter: "'+function(t,n){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+n+",M12 = -"+t+",M21 = "+t+",M22 = "+n+",SizingMethod = 'auto expand')"}(u,c)+'"');var v=Math.abs(Math.round(t-i)),_=Math.abs(Math.round(a-n));switch(m(t,i,n,a)){case 1:f-=_;break;case 2:d-=v,f-=_;break;case 3:d-=v}}l.push("top:"+f+"px"),l.push("left:"+d+"px"),e.style.cssText=l.join(";")}}function m(t,n,i,a){return t<=n?a<=i?1:4:a<=i?2:3}var w=new gantt.Oi(this.Uh,{ha:0,ia:60}),k="gantt_link_control";w.attachEvent("onBeforeDragStart",gantt.bind(function(t,n){var i=n.target||n.srcElement;if(s(),gantt.Ka().Ne)return!1;if(gantt.Rh(i,"gantt_link_point")){gantt.Rh(i,"task_left")&&(gantt.Ch=!0);var a=gantt.Ih=this.Ci(n),e=gantt.wi(a);if(gantt.xe(e))return s(),!1;var r=0;return gantt.jh(e.type)==gantt.J.types.et&&(r=(gantt.Hh()-gantt.Oh())/2),this.Nh=l(e,!!gantt.Ch,r),!0}return!1},this)),w.attachEvent("onAfterDragStart",gantt.bind(function(t,n){this.J.Ji&&(this.Fh=!0,this.ae()),v(w.J.marker)},this)),w.attachEvent("onDragMove",gantt.bind(function(t,n){var i=w.J,a=w.la(n);!function(t,n){t.style.left=n.x+5+"px",t.style.top=n.y+5+"px"}(i.marker,a);var e=gantt.Gh(n),r=gantt.Eh,s=gantt.Vh,h=gantt.Lh,o=gantt.Ci(n),g=!0;if(e&&(g=!gantt.Rh(n,"task_right"),e=!!o),gantt.Eh=o,gantt.Vh=e,gantt.Lh=g,e){var u=gantt.wi(o),c=gantt.Rh(n,k),f=0;c&&(f=Math.floor(c.offsetWidth/2)),this.Xh=l(u,!!gantt.Lh,f)}else this.Xh=gantt.Is(n);var d=!(s==e&&r==o&&h==g);return d&&(r&&gantt.Cs(r,!1),o&&gantt.Cs(o,!1)),d&&v(i.marker),_(this.Nh.x,this.Nh.y,this.Xh.x,this.Xh.y),!0},this)),w.attachEvent("onDragEnd",gantt.bind(function(){var t=p();if(t.from&&t.Sh&&t.from!=t.Sh){var n=gantt.qs(t.Th,t.Ah),i={source:t.from,target:t.Sh,type:n};i.type&&gantt.Di(i)&&gantt.Yh(i)}s(),this.J.Ji?(this.Fh=!1,this.ae()):(t.from&&gantt.Cs(t.from,!1),t.Sh&&gantt.Cs(t.Sh,!1)),w.Bh&&(w.Bh.parentNode&&w.Bh.parentNode.removeChild(w.Bh),w.Bh=null)},this)),gantt.Gh=function(t){return!!gantt.Rh(t,k)}},gantt.Wh=function(){return{qh:this.Vh,Jh:this.Eh,$h:this.Lh,Kh:this.Ih,Qh:this.Ch}},gantt.Zh=function(n,a,r,e){return this.to||(this.to={}),this.no||(this.no={}),this.no[n]||(a||this.assert(!1,"Invalid renderer call"),r&&r.setAttribute(this.J.tn,!0),this.no[n]={Ws:function(t,n){if(n=n||r,!e||e(t)){var i=a.call(gantt,t);this.append(t,i,n)}else this.io(t.id)},clear:function(t){this.ao=gantt.to[n]={},this.eo(t)},eo:function(t){(t=t||r)&&(t.innerHTML="")},ro:function(t,n){n=n||r;var i=document.createDocumentFragment();this.clear(n);for(var a=0,e=t.length;a<e;a++)this.Ws(t[a],i);n.appendChild(i)},append:function(t,n,i){return n?(this.ao[t.id]&&this.ao[t.id].parentNode?this.so(t.id,n):i.appendChild(n),void(this.ao[t.id]=n)):void(this.ao[t.id]&&this.io(t.id))},so:function(t,n){var i=this.ao[t];i&&i.parentNode&&i.parentNode.replaceChild(n,i),this.ao[t]=n},io:function(t){this.hide(t),delete this.ao[t]},hide:function(t){var n=this.ao[t];n&&n.parentNode&&n.parentNode.removeChild(n)},restore:function(t){var n=this.ao[t.id];n?n.parentNode||this.append(t,n,r):this.Ws(t,r)},ho:function(t,n){this.ao[n]=this.ao[t],delete this.ao[t]},ao:this.to[n],oo:r,uo:function(){this.clear(),delete gantt.no[n],delete gantt.to[n]}}),this.no[n]},gantt.co=function(){for(var t in this.no)this.Zh(t).uo()},gantt.fo=function(t){return t&&t.hasAttribute&&t.hasAttribute(this.J.tn)},gantt.Fh=!1,gantt.do=function(){function i(t,n,i,a){for(var e=0;e<t.length;e++)t[e].ho(n,i),t[e].Ws(a)}this.zs={Xr:this.J.columnWidth,width:[],Tr:0,Or:[],ao:{}},this.Ti.lo=this.bind(function(t,n){var i=this.Ci(t,gantt.J.Zt);i&&this.l("onLinkClick",[i,t])},this),this.Ti.vo=this.bind(function(t,n){var i=gantt.Is(t),a=gantt.ms(i.x),e=Math.floor(gantt._o(a)),r=gantt.zs.Or[e];gantt.l("onScaleClick",[t,r])},this),this.Ai.lo=this.bind(function(t,n,i){n=this.Ci(t,gantt.J.Zt);this.po(n,t)},this),this.Ai.mo=this.bind(function(t,n,i){n=this.Ci(t);var a=this.wi(n),e=null;return i.parentNode&&gantt.zi(i.parentNode)&&(e=-1<gantt.zi(i.parentNode).indexOf("_left")?a.wo[0]:a.ko[0]),e&&this.po(e,t),!1},this),this.Qr.init(),this.yh(),this.bo.clear();var t=this.xo({yo:this.Js,Do:this.Ph,filter:gantt.Mo([gantt.So,gantt.ee].concat(this.To()))});this.Ao=this.bo.Io(t),this.Eo.clear();var n=this.Co({yo:this.Lo,Do:this.Uh,filter:gantt.Mo([gantt.Bo,gantt.ee].concat(this.Po()))});this.zo=this.Eo.Io(n),this.Co({yo:this.Oa,Do:this.pe,filter:gantt.Mo([gantt.Bo,gantt.Ca].concat(this.Po()))}),this.Co({yo:this.Uo,Do:this.Ro,filter:gantt.Mo([gantt.Bo,gantt.ee,gantt.jo].concat(this.Po()))}),this.Ho&&this.detachEvent(this.Ho),this.Ho=this.attachEvent("onTaskIdChange",function(t,n){i(this.Oo(),t,n,this.wi(n))}),this.No&&this.detachEvent(this.No),this.No=this.attachEvent("onLinkIdChange",function(t,n){i(this.Ys(),t,n,this.Xs(n))})},gantt.Po=function(){return[]},gantt.To=function(){return[]},gantt.ee=function(){return!!this.J._t},gantt.Bo=function(t,n){var i=null,a=null;return!(this.J.xa&&this.J.Ja&&(i=this.J.xa.valueOf(),a=this.J.Ja.valueOf(),+n.xa>a||+n.Ja<+i))},gantt.So=function(t,n){return!!this.J.ct&&(!(!gantt.Fo(n.source)||!gantt.Fo(n.target)||gantt.Go(gantt.wi(n.source))||gantt.Go(gantt.wi(n.target)))&&this.l("onBeforeLinkDisplay",[t,n]))},gantt.jo=function(){return!this.J.dt},gantt.po=function(t,n){if(t&&this.l("onLinkDblClick",[t,n])){var i=gantt.Xs(t);if(gantt.xe(i))return;var a=gantt.locale.labels.link+" "+this.$.mi(this.Xs(t))+" "+gantt.locale.labels.Vo;window.setTimeout(function(){gantt.Xo(a,"",function(){gantt.Yo(t)})},gantt.J.Ji?300:1)}},gantt.Wo=function(t){return this.zo.ao[t]},gantt.qo=function(t){return this.Ao.ao[t]},gantt.Jo=function(){for(var t=[],n=this.$o(),i=0;i<n.length;i++){var a=this.ne[n[i]];a.Ko=i,this.Qo(a),t.push(a)}return t},gantt.$o=function(){return this.Me},gantt.Zo=function(){return this.tg.slice()},gantt.ng=function(){this.l("onBeforeDataRender",[]),this.ig?this.ig=!1:this.ag();for(var t=this.Jo(),n=this.Oo(),i=0;i<n.length;i++)n[i].clear();var a=gantt.Zo();n=this.Ys();for(i=0;i<n.length;i++)n[i].clear();this.eg(),this.rg();for(n=this.Oo(),i=0;i<n.length;i++)n[i].ro(t);a=gantt.Zo();n=this.Ys();for(i=0;i<n.length;i++)n[i].ro(a);this.l("onDataRender",[])},gantt.eg=function(){var t=this.zs;t.sg=this.Mh();var n=Math.max(gantt.hg-(gantt.og().x?gantt.og().gg+1:0)-1,0);this.cs.style.height=Math.max(n-this.J.Ua,0)+"px",gantt.J.Ce?this.Ro.style.height=gantt.J.Qa*this.ug()+"px":this.Ro.style.height="",this.Ro.style.backgroundImage="";for(var i=this.cs.childNodes,a=0,e=i.length;a<e;a++){var r=i[a];this.fo(r)&&r.style&&(r.style.width=t.Tr+"px")}if(this.Ca()){var s=this.Ba(),h=0;for(a=0;a<s.length;a++)h+=s[a].width;this.pe.style.width=Math.max(h-1,0)+"px"}},gantt.cg=function(){var t=this.J.Gt;if(this.J.Vt){var n=this.fg();t=n[n.length-1].Er}return t},gantt.dg=function(){var t=this.cg();if(this.J.xa&&this.J.Ja){this.Jr=this.Fn[t+"_start"](new Date(this.J.xa));var n=new Date(this.J.Ja),i=this.Fn[t+"_start"](new Date(n));return n=+n!=+i?this.Fn.add(i,1,t):i,void(this.$r=n)}this.Jo();var a=this.lg();this.Jr=a.xa,this.$r=a.Ja,this.$r&&this.$r||(this.Jr=new Date,this.$r=new Date(this.Jr)),this.Jr=this.Fn[t+"_start"](this.Jr),this.Jr=this.bs(this.Fn[t+"_start"](this.Jr),-1,t),this.$r=this.Fn[t+"_start"](this.$r),this.$r=this.bs(this.$r,2,t)},gantt.vg=function(t,n,i){var a=[],e=null,r=null,s=null;(t.Fa||t.Fn)&&(r=t.Fa||this.Fn.Nn(t.Fn));var h=0,o=t.count-1;!this.J.Un||isNaN(n)||isNaN(i)||(h=this._g(t.left,n),o=this._g(t.left,i)+1),s=t.Lr||function(){},!t.Lr&&this.J.Yt&&(s=gantt.$.ri);for(var g=h;g<o&&t.Or[g];g++){e=new Date(t.Or[g]);var u=r.call(this,e),c=t.width[g],f=t.height-(this.J.Un&&t.index?1:0),d=t.left[g],l="",v="",_="";if(c){l="width:"+c+"px;height:"+f+"px;"+(this.J.Un?"position:absolute;left:"+d+"px":""),_="gantt_scale_cell"+(g==t.count-1?" gantt_last_cell":""),(v=s.call(this,e))&&(_+=" "+v);var p="<div class='"+_+"'"+gantt.ja.Ue(u)+" style='"+l+"'>"+u+"</div>";a.push(p)}}return a.join("")},gantt.fg=function(){var t=this.yr,n=[t.Cr()].concat(this.J.Xt);return t.Ir(n),n},gantt.pg=function(t,n,i){for(var a=[],e=this.$.si,r=0;r<t.length;r++){var s="gantt_scale_line",h=e(t[r]);h&&(s+=" "+h),a.push('<div class="'+s+'" style="height:'+t[r].height+"px;position:relative;line-height:"+t[r].height+'px">'+this.vg(t[r],n,i)+"</div>")}return a.join("")},gantt.mg=function(){if(this.J.Un){var t=this.wg,n=gantt.Ie().x;this.kg.innerHTML=this.pg(t,n,n+this.re-this.Pa())}},gantt.attachEvent("onGanttScroll",function(t,n,i,a){gantt.J.Un&&t!=i&&gantt.mg()}),gantt.attachEvent("onGanttRender",function(){gantt.J.Un&&gantt.mg()}),gantt.bg=function(){this.dg(),this.rg(),this.xg();var t="",n=0,i=0;if(this.ee()){var a=this.yr,e=this.fg();i=this.J.Ua-1;var r=this.yg().x?Math.max(this.J.ut,0):Math.max(this.re-this.Pa()-2,0),s=a.Br(e,this.J.bn,r,i),h=this.zs=s[s.length-1];this.wg=s,t=this.pg(s,0,this.re-this.Pa());var o=this.og();n=h.Tr+(this.og().y?o.gg:0)+"px",h.Tr+"px",i+="px"}this.ee()?this.Dg.style.display="":this.Dg.style.display="none",this.kg.style.height=i,this.cs.style.width=this.kg.style.width=n,this.kg.innerHTML=t},gantt.Uo=function(t){var n=gantt.zs,i=n.count,a=document.createElement("div");if(gantt.J.ft)for(var e=0;e<i;e++){var r=n.width[e],s="";if(0<r){var h=document.createElement("div");h.style.width=r+"px",s="gantt_task_cell"+(e==i-1?" gantt_last_cell":""),(g=this.$.ei(t,n.Or[e]))&&(s+=" "+g),h.className=s,a.appendChild(h)}}var o=t.Ko%2!=0,g=gantt.$.ai(t.xa,t.Ja,t),u="gantt_task_row"+(o?" odd":"")+(g?" "+g:"");return this.Ka().$a==t.id&&(u+=" gantt_selected"),a.className=u,gantt.J.Ce&&(a.style.position="absolute",a.style.top=this.Mg(t.id)+"px",a.style.width="100%"),a.style.height=gantt.J.Qa+"px",a.setAttribute(this.J.Qt,t.id),a},gantt.Sg=function(){if(this.J.Mt){var t=+this.Jr,n=+this.$r;if(this.dg(),+this.Jr!=t||+this.$r!=n)return this.Tg(),this.l("onScaleAdjusted",[]),!0}return!1},gantt.Cs=function(t,n){var i=this.Oo(),a=this.wi(t);if(a&&this.Fo(t)){for(var e=0;e<i.length;e++)i[e].Ws(a);if(void 0!==n&&!n)return;for(e=0;e<a.ko.length;e++)gantt.Ag(a.ko[e]);for(e=0;e<a.wo.length;e++)gantt.Ag(a.wo[e])}},gantt.Ag=function(t){if(this.Ig(t))this.Vs(t);else for(var n=this.Ys(),i=0;i<n.length;i++)n[i].io(t)},gantt.Eg=function(t,n,i){var a=[t];n&&a.push(n);var e=gantt.Ka(),r=this.wi(i);this.jh(r.type)==this.J.types.et&&a.push("gantt_milestone"),this.jh(r.type)==this.J.types.at&&a.push("gantt_project"),this.Bs(r)&&a.push("gantt_dependent_task"),this.J.St&&i==e.$a&&a.push("gantt_selected"),i==e.Ne&&(a.push("gantt_drag_"+e.zt),e.Ki&&a.push("gantt_touch_"+e.zt));var s=gantt.Wh();if(s.Kh==i&&a.push("gantt_link_source"),s.Jh==i&&a.push("gantt_link_target"),this.J.th&&this.Cg&&this.Cg(r)&&a.push("gantt_critical_task"),s.qh&&s.Jh&&s.Kh&&s.Jh!=s.Kh){var h,o=s.Kh,g=s.Qh,u=s.$h;h=gantt.Di(o,i,g,u)?u?"link_start_allow":"link_finish_allow":u?"link_start_deny":"link_finish_deny",a.push(h)}return a.join(" ")},gantt.Lg=function(t,n,i,a){var e=gantt.Ka();+i.Ja<=+e.ks&&t.appendChild(a(n+" task_right")),+i.xa>=+e.ws&&t.appendChild(a(n+" task_left"))},gantt.Mh=function(){var t=this.J.kn;return"full"==t&&(t=this.J.Qa-5),t=Math.min(t,this.J.Qa),Math.max(t,0)},gantt.Oh=function(){return this.Mh()},gantt.Hh=function(){var t=gantt.Mh();return Math.sqrt(2*t*t)},gantt.Bg=function(t,n,i){var a=this.ys(n||t.xa),e=this.ys(i||t.Ja);return e=Math.max(a,e),{left:a,top:this.Mg(t.id),height:gantt.Mh(),width:Math.max(e-a,0)}},gantt.Pg=function(t,n,i){return Math.round(this.Dh(t,!1).x-this.Dh(t,!0).x)},gantt.xe=function(t){return(!t||!t[this.J.In])&&(t&&t[this.J.An]||this.J.It)},gantt.zg=function(t){if(!this.Go(t)){var n=this.Dh(t),i=this.J,a=this.Mh(),e=Math.floor((this.J.Qa-a)/2);this.jh(t.type)==i.types.et&&1<i.dh&&(e+=1);var r=document.createElement("div"),s=gantt.Pg(t),h=this.jh(t.type);r.setAttribute(this.J.Qt,t.id),i.Dt&&h!=this.J.types.et&&this.Ug(t,r,s);var o=gantt.Rg(t,s);t.jg&&(o.style.color=t.jg),r.appendChild(o);var g=this.Eg("gantt_task_line",this.$.ni(t.xa,t.Ja,t),t.id);(t.color||t.Hg||t.jg)&&(g+=" gantt_task_inline_color"),r.className=g;var u=["left:"+n.x+"px","top:"+(e+n.y)+"px","height:"+a+"px","line-height:"+a+"px","width:"+s+"px"];t.color&&u.push("background-color:"+t.color),t.jg&&u.push("color:"+t.jg),r.style.cssText=u.join(";");var c=this.Og(t);return c&&r.appendChild(c),(c=this.Ng(t))&&r.appendChild(c),gantt.ja.Oe(t,r),this.xe(t)||(i.Bt&&!this.Bs(t)&&h!=this.J.types.et&&gantt.Lg(r,"gantt_task_drag",t,function(t){var n=document.createElement("div");return n.className=t,n}),i.Ct&&this.J.ct&&gantt.Lg(r,"gantt_link_control",t,function(t){var n=document.createElement("div");n.className=t,n.style.cssText=["height:"+a+"px","line-height:"+a+"px"].join(";");var i=document.createElement("div");return i.className="gantt_link_point",i.style.display=gantt.Fh?"block":"",n.appendChild(i),n})),r}},gantt.Lo=function(t){var n=this.J.En[this.jh(t.type)],i=this.zg;return n||(n=i),n.call(this,t,this.bind(i,this))},gantt.Fg=function(t,n,i){if(!n)return null;var a=n(t.xa,t.Ja,t);if(!a)return null;var e=document.createElement("div");return e.className="gantt_side_content "+i,e.innerHTML=a,e},gantt.Og=function(t){var n="gantt_left "+gantt.Gg(!0,t);return gantt.Fg(t,this.$.Vg,n)},gantt.Ng=function(t){var n="gantt_right "+gantt.Gg(!1,t);return gantt.Fg(t,this.$.Xg,n)},gantt.Yg=function(t){return t?{ko:[gantt.J.links.Z],wo:[gantt.J.links.Z,gantt.J.links.K]}:{ko:[gantt.J.links.K,gantt.J.links.tt],wo:[gantt.J.links.tt]}},gantt.Gg=function(t,n){var i=gantt.Yg(t);for(var a in i)for(var e=n[a],r=0;r<e.length;r++)for(var s=gantt.Xs(e[r]),h=0;h<i[a].length;h++)if(s.type==i[a][h])return"gantt_link_crossing";return""},gantt.Rg=function(t,n){var i=document.createElement("div");return this.jh(t.type)!=this.J.types.et&&(i.innerHTML=this.$.ti(t.xa,t.Ja,t)),i.className="gantt_task_content",i},gantt.Ug=function(t,n,i){var a=1*t.Ut||0;i=Math.max(i-2,0);var e=document.createElement("div"),r=Math.round(i*a);if(r=Math.min(i,r),t.Hg&&(e.style.backgroundColor=t.Hg,e.style.opacity=1),e.style.width=r+"px",e.className="gantt_task_progress",e.innerHTML=this.$.Qn(t.xa,t.Ja,t),n.appendChild(e),this.J.Lt&&!gantt.xe(t)){var s=document.createElement("div");s.style.left=r+"px",s.className="gantt_task_progress_drag",e.appendChild(s),n.appendChild(s)}},gantt.uh=function(t){var n={Wg:1,qg:60,Jg:3600,$g:86400,Kg:604800,Qg:2592e3,Zg:7776e3,tu:31536e3};return n[t]||n.Jg},gantt.ms=function(t){var n=this.zs;if(t<0||t>n.Tr||!n.Tr)return null;var i=this._g(this.zs.left,t),a=this.zs.left[i],e=n.width[i]||n.Xr,r=0;e&&(r=(t-a)/e);var s=0;return r&&(s=gantt.nu(n,n.Or[i])),new Date(n.Or[i].valueOf()+Math.round(r*s))},gantt.ys=function(t){if(!this.ee())return 0;var n=gantt._o(t);this.assert(0<=n,"Invalid day index");var i=Math.floor(n),a=n%1,e=gantt.zs.left[Math.min(i,gantt.zs.width.length-1)];return i==gantt.zs.width.length&&(e+=gantt.zs.width[gantt.zs.width.length-1]),a&&(e+=i<gantt.zs.width.length?gantt.zs.width[i]*(a%1):1),e},gantt._o=function(t){var n=new Date(t).valueOf(),i=gantt.zs.Or,a=gantt.zs.Gr;if(n<=this.Jr)return 0;if(n>=this.$r)return i.length;for(var e=gantt._g(i,n),r=+gantt.zs.Or[e];a[r];)r=gantt.zs.Or[++e];return r?e+(t-i[e])/gantt.nu(gantt.zs,i[e]):0},gantt._g=function(t,n){for(var i,a,e,r=0,s=t.length-1;r<=s;)if(a=+t[i=Math.floor((r+s)/2)],e=+t[i-1],a<n)r=i+1;else{if(!(n<a))return i;if(!isNaN(e)&&e<n)return i-1;s=i-1}return t.length-1},gantt.nu=function(t,n){return gantt.Fn.add(n,t.step,t.Er)-n},gantt.iu=function(t,n){n=!1!==n,gantt.ys(n?t.xa:t.Ja)},gantt.Mg=function(t){return this._h(this.Ya(t))},gantt.au=function(t,n,i){n=!1!==n,i=i||0;var a,e=this.jh(t.type)==this.J.types.et;a=n||e?t.xa||this.eu(t):t.Ja||this.bs(this.eu(t));var r=this.ys(a);return e&&(n?r-=i:r+=i),{x:r,y:this.Mg(t.id)}},gantt.Dh=function(t,n){n=!1!==n;var i=gantt.Oh()/2;return this.au(t,n,i)},gantt.xh=function(t,n){n=!1!==n;var i=gantt.Hh()/2;return this.au(t,n,i)},gantt.ru=function(t,n){return t-6e4*(new Date(gantt.Jr).getTimezoneOffset()-new Date(t).getTimezoneOffset())*(n?-1:1)},gantt.Is=function(t){if(t.pageX||t.pageY)var n={x:t.pageX,y:t.pageY};var i=gantt.hu.su?document.documentElement:document.body,a=(n={x:t.clientX+i.scrollLeft-i.clientLeft,y:t.clientY+i.scrollTop-i.clientTop},gantt.L(gantt.cs));return n.x=n.x-a.x+gantt.cs.scrollLeft,n.y=n.y-a.y+gantt.cs.scrollTop,n},gantt.fo=function(t){return t&&t.hasAttribute&&t.hasAttribute(this.J.tn)},gantt.attachEvent("onGanttReady",function(){gantt.Eo.add(),gantt.bo.add()}),gantt.ou={gu:function(t){return"function"==typeof t&&(t={yo:t}),t.id=gantt.M(),t.Do||(t.Do=document.createElement("div")),t},create:function(t,o){return{uu:[],cu:{},Do:t,fu:function(){var t=[];for(var n in this.cu)t.push(this.cu[n]);return t},Io:function(t){return this.cu[t]},add:function(t){if(t&&this.uu.push(t),this.Do())for(var n=this.Do(),i=this.uu,a=0;a<i.length;a++){var e=(t=i[a]).Do,r=t.id,s=t.du;if(!e.parentNode)if(s)n.appendChild(e);else{var h=o?o():n.firstChild;h?n.insertBefore(e,h):n.appendChild(e)}this.cu[r]=gantt.Zh(r,t.yo,e,t.filter),this.uu.splice(a,1),a--}},remove:function(t){this.cu[t].uo(),delete this.cu[t]},clear:function(){for(var t in this.cu)this.cu[t].uo();this.cu={}}}}},gantt.Mo=function(r){return r instanceof Array||(r=Array.prototype.slice.call(arguments,0)),function(t){for(var n=!0,i=0,a=r.length;i<a;i++){var e=r[i];e&&(n=n&&!1!==e.apply(gantt,[t.id,t]))}return n}},gantt.lu=function(n,i){return function(t){return void 0===t.filter&&(t.filter=gantt.Mo(i)),t=gantt.ou.gu(t),n.add(t),t.id}},gantt.Eo=gantt.ou.create(function(){return gantt.cs},function(){return gantt.Ph}),gantt.bo=gantt.ou.create(function(){return gantt.cs}),gantt.Co=gantt.lu(gantt.Eo,[gantt.Bo,gantt.ee].concat(gantt.Po())),gantt.vu=function(t){gantt.Eo.remove(t)},gantt.xo=gantt.lu(gantt.bo,[gantt.So,gantt.ee].concat(gantt.To())),gantt._u=function(t){gantt.bo.remove(t)},gantt.Oo=function(){return this.Eo.fu()},gantt.Ys=function(){return this.bo.fu()},gantt.ne={},gantt.fe={},gantt.Me=[],gantt.pu={},gantt.tg=[],gantt.mu=[],gantt.load=function(n,t,i){this.wu=n,this.assert(arguments.length,"Invalid load arguments");var a="json",e=null;3<=arguments.length?(a=t,e=i):"string"==typeof t?a=t:"function"==typeof t&&(e=t),this.ku=a,this.l("onLoadStart",[n,a]),this.bu.get(n,gantt.bind(function(t){this.xu(t,a),this.l("onLoadEnd",[n,a]),"function"==typeof e&&e.call(this)},this))},gantt.parse=function(t,n){this.xu({yu:{responseText:t}},n)},gantt.Du=function(t){return this[t=t||"json"].Du()},gantt.xu=function(t,n){this.l("onBeforeParse",[]),n||(n="json"),this.assert(this[n],"Invalid data type:'"+n+"'");var i=t.yu.responseText,a=this[n].parse(i,t);this.Mu(a)},gantt.Su=function(t){return this.Tu(t),!!this.l("onTaskLoading",[t])&&(this.ne[t.id]=t,!0)},gantt.Au=function(t){for(var n=null,i=[],a=0,e=t.length;a<e;a++)n=t[a],this.Su(n)&&i.push(n);return i},gantt.Iu=function(t){for(var n=null,i=0,a=t.length;i<a;i++)n=t[i],this.ce(n,this.he(n)||this.J.Ot);for(i=0,a=t.length;i<a;i++)n=t[i],this.Eu(n),n.Ga=this.de(n)},gantt.Mu=function(t){t.Cu&&this.Lu(t.Cu);var n=this.Au(t.data);if(this.Iu(n),this.ag(),this.ig=!0,this.Bu(t.links||(t.Cu?t.Cu.links:[])),this.l("onParse",[]),this.Tg(),this.J._n){var i=this.Me[0]||this.J.Ot;i&&this.Pu(i)}},gantt.Bu=function(t){if(t)for(var n=0;n<t.length;n++)if(t[n]){var i=this.zu(t[n]);this.pu[i.id]=i}this.Uu()},gantt.Lu=function(t){var n=!1;for(var i in t)if(t.hasOwnProperty(i)){n=!0;var a=t[i],e=this.Ru[i];if(!e)continue;e.splice(0,e.length);for(var r=0;r<a.length;r++){var s=a[r],h=this.m(s);for(var o in h.key=h.value,s)if(s.hasOwnProperty(o)){if("value"==o||"label"==o)continue;h[o]=s[o]}e.push(h)}}n&&this.l("onOptionsLoad",[])},gantt.ag=function(t){this.Me=[],this.mu=[],this.ju={},this.Hu({parent:this.J.Ot,gi:!0,Ou:!0,id:this.J.Ot}),t||(this.rg(),this.xg())},gantt.attachEvent("onBeforeTaskDisplay",function(t,n){return!n.Ou}),gantt.Hu=function(t,n){t.id!==gantt.J.Ot&&(this.mu.push(t.id),!n&&this.Bo(t.id,t)&&this.l("onBeforeTaskDisplay",[t.id,t])&&(this.Me.push(t.id),this.ju[t.id]=this.Me.length-1));var i=this.ge(t.id);if(i)for(var a=0;a<i.length;a++)this.Hu(this.ne[i[a]],n||!t.gi)},gantt.Te=function(){return this.mu.length},gantt.Nu=function(){return this.tg.length},gantt.ug=function(){return this.Me.length},gantt.oe=function(t){for(var n=this.ge(this.he(t)),i=0;i<n.length;i++)if(n[i]==t)return i;return-1},gantt.Ya=function(t){this.assert(t,"Invalid argument");var n=this.ju[t];return void 0!==n?n:-1},gantt.Fu=gantt.Ya,gantt.Gu=function(t,n,i){n=n||this.J.Ot,i=i||this;var a=this.ge(n);if(a)for(var e=0;e<a.length;e++){var r=this.ne[a[e]];t.call(i,r),this.Pe(r.id)&&this.Gu(t,r.id,i)}},gantt.Vu=function(t,n,i){i=i||this;for(var a=n;this.he(a)&&this.Be(this.he(a));)a=this.wi(this.he(a)),t.call(i,a)},gantt.json={parse:function(t){return gantt.assert(t,"Invalid data"),"string"==typeof t&&(window.JSON?t=JSON.parse(t):gantt.assert(!1,"JSON is not supported")),t.Xu&&(gantt.Yu=t.Xu),t},Wu:function(t){var n={};for(var i in t)n[i]=t[i];return n},qu:function(t){var n={};for(var i in t)"$"!=i.charAt(0)&&(n[i]=t[i],n[i]instanceof Date&&(n[i]=gantt.$.Kn(n[i])));return n},Du:function(){var t,n=[];return gantt.Gu(function(t){gantt.Qo(t),n.push(this.qu(t))},gantt.J.Ot,this),t=gantt.tg.slice(),{data:n,links:t}}},gantt.Ju={$u:function(t,n){for(var i={},a=0;a<t.attributes.length;a++)i[t.attributes[a].name]=t.attributes[a].value;if(!n){for(a=0;a<t.childNodes.length;a++){var e=t.childNodes[a];1==e.nodeType&&(i[e.tagName]=e.firstChild?e.firstChild.nodeValue:"")}i.text||(i.text=t.firstChild?t.firstChild.nodeValue:"")}return i},Ku:function(t){for(var n={},i=gantt.bu.Qu("//coll_options",t),a=0;a<i.length;a++)for(var e=n[i[a].getAttribute("for")]=[],r=gantt.bu.Qu(".//item",i[a]),s=0;s<r.length;s++){for(var h=r[s].attributes,o={key:r[s].getAttribute("value"),label:r[s].getAttribute("label")},g=0;g<h.length;g++){var u=h[g];"value"!=u.nodeName&&"label"!=u.nodeName&&(o[u.nodeName]=u.nodeValue)}e.push(o)}return n},Zu:function(t,n,i){i=i||"data",n.tc||(n=gantt.bu.parse(n));var a=gantt.bu.nc(i,n.yu);if(a.tagName!=i)throw"Invalid XML data";var e=a.getAttribute("dhx_security");return e&&(gantt.Yu=e),a},parse:function(t,n){n=this.Zu(t,n);for(var i={},a=i.data=[],e=gantt.bu.Qu("//task",n),r=0;r<e.length;r++)a[r]=this.$u(e[r]);return i.Cu=this.Ku(n),i},Wu:function(t){return"<item id='"+t.id+"' source='"+t.source+"' target='"+t.target+"' type='"+t.type+"' />"},qu:function(t){return"<task id='"+t.id+"' parent='"+(t.parent||"")+"' start_date='"+t.xa+"' duration='"+t.duration+"' open='"+!!t.open+"' progress='"+t.Ut+"' end_date='"+t.Ja+"'><![CDATA["+t.text+"]]></task>"},Du:function(){for(var t=[],n=[],i=gantt.json.Du(),a=0,e=i.data.length;a<e;a++)t.push(this.qu(i.data[a]));for(a=0,e=i.links.length;a<e;a++)n.push(this.Wu(i.links[a]));return"<data>"+t.join("")+"<coll_options for='links'>"+n.join("")+"</coll_options></data>"}},gantt.ic={parse:function(t,n){n=gantt.Ju.Zu(t,n,"projects");for(var i={Cu:{links:[]}},a=i.data=[],e=gantt.bu.Qu("//task",n),r=0;r<e.length;r++){a[r]=gantt.Ju.$u(e[r]);var s=e[r].parentNode;"project"==s.tagName?a[r].parent="project-"+s.getAttribute("id"):a[r].parent=s.parentNode.getAttribute("id")}e=gantt.bu.Qu("//project",n);for(r=0;r<e.length;r++){(h=gantt.Ju.$u(e[r],!0)).id="project-"+h.id,a.push(h)}for(r=0;r<a.length;r++){var h;(h=a[r]).xa=h.ac||h.ec,h.Ja=h.rc,h.text=h.name,h.duration=h.duration/8,h.open=1,h.duration||h.Ja||(h.duration=1),h.sc&&i.Cu.links.push({target:h.id,source:h.sc,type:gantt.J.links.K})}return i},Du:function(){gantt.message("Serialization to 'old XML' is not implemented")}},gantt.Ru=function(t,n){return n?this.Ru[t]=n.slice(0):this.Ru[t]||(this.Ru[t]=[]),this.Ru[t]},gantt.hc={units:["year","month","week","day","hour","minute"],oc:function(){return{nr:[0,17],gc:{0:!1,6:!1}}},uc:{cc:{},get:function(t,n){var i=-1,a=this.cc;if(a&&a[t]){var e=a[t],r=n.getTime();void 0!==e[r]&&(i=e[r])}return i},put:function(t,n,i){if(!t||!n)return!1;var a=this.cc,e=n.getTime();return i=!!i,!!a&&(a[t]||(a[t]={}),a[t][e]=i,!0)},clear:function(){this.cc={}}},fc:function(t){for(var n=0,i=this.units.length;n<i;n++)if(this.units[n]==t)return n},dc:function(t){var n=null;return t.$g||0===t.$g?n=t.$g:t.Fn&&(n=Date.UTC(t.Fn.getFullYear(),t.Fn.getMonth(),t.Fn.getDate())),n},lc:function(t){var n=void 0===t.nr||t.nr,i=this.dc(t);null!==i?this.vc().gc[i]=n:this.vc().nr=n,this.uc.clear()},vc:function(){return gantt.J._c&&gantt.J._c.global||this.pc(),gantt.J._c.global},pc:function(){gantt.J._c={},gantt.J._c.global=this.oc()},mc:function(t){if(t){var n=this.dc(t);null!==n&&delete this.vc().gc[n]}else this.pc();this.uc.clear()},wc:function(t,n,i){if(!gantt.J.st)return!0;var a=this.uc.get(n,t);return-1==a&&(a=this.kc(t,n,i),this.uc.put(n,t,a)),a},kc:function(t,n,i){return void 0===i&&(i=this.fc(n)),void 0===i||!(i&&!this.wc(t,this.units[i-1],i-1))&&(!this["is_work_"+n]||this["is_work_"+n](t))},bc:function(t){var n=this.xc(t);return n instanceof Array&&0<n.length},yc:function(t){for(var n=this.xc(t),i=t.getHours(),a=0;a<n.length;a+=2){if(void 0===n[a+1])return n[a]==i;if(i>=n[a]&&i<n[a+1])return!0}return!1},xc:function(t){var n=this.dc({Fn:t}),i=!0,a=this.vc();return void 0!==a.gc[n]?i=a.gc[n]:void 0!==a.gc[t.getDay()]&&(i=a.gc[t.getDay()]),!0===i?a.nr:i||[]},Dc:{},Mc:function(t,n,i){var a=+t,e=n+"_"+i,r=this.Dc[e];return r||(r=this.Dc[e]={}),r[a]||(r[a]=gantt.Fn.add(t,i,n)),r[a]},Sc:function(t,n,i,a){for(var e=new Date(t),r=new Date(n),s=(a=a||1,0);e.valueOf()<r.valueOf();)this.wc(e,i)&&s++,e=this.Mc(e,i,a);return s},Tc:function(t){for(var n=this.xc(t),i=0,a=0;a<n.length;a+=2)i+=n[a+1]-n[a]||0;return i},Ac:function(t,n){for(var i=0,a=new Date(t),e=new Date(n);a.valueOf()<e.valueOf();)this.wc(a,"day")&&(i+=this.Tc(a)),a=this.Mc(a,"day",1);return i},Ic:function(t,n,i,a){var e=new Date(t),r=new Date(n),s=(a=a||1,new Date(e)),h=gantt.Fn.add(gantt.Fn.Ec(new Date(e)),1,"day");if(r.valueOf()<=h.valueOf())return this.Sc(t,n,i,a);var o=gantt.Fn.Ec(new Date(r)),g=r,u=this.Sc(s,h,i,a),c=this.Sc(o,g,i,a),f=this.Ac(h,o);return Math.floor(f/a+u+c)},Cc:function(t,n,i,a){return!!i&&("hour"==i?this.Ic(t,n,i,a):this.Sc(t,n,i,a))},Lc:function(t,n,i,a){if(!i)return!1;var e=new Date(t),r=new Date(n);for(a=a||1;e.valueOf()<r.valueOf();){if(this.wc(e,i))return!0;e=this.Mc(e,i,a)}return!1},Bc:function(t,n,i,a){if(!i)return!1;var e=new Date(t),r=0;a=a||1,n*=1;if(gantt.J.st){for(;r<n;){var s=this.Mc(e,i,a);this.wc(0<a?new Date(s.valueOf()-1):new Date(s.valueOf()+1),i)&&r++,e=s}return e}return gantt.Fn.add(e,a*n,i)},Pc:function(t){if(this.wc(t.Fn,t.Er))return t.Fn;var n=t.Er,i=gantt.Fn[n+"_start"](t.Fn),a=new Date(i),e=new Date(i),r=!0,s=0,h="any"==t.dir||!t.dir,o=1;for("past"==t.dir&&(o=-1);!this.wc(i,n);){h&&(i=r?a:e,o*=-1);var g=i.getTimezoneOffset();if(i=gantt.Fn.add(i,o,n),i=gantt.Kr(i,g,o,n),gantt.Fn[n+"_start"]&&(i=gantt.Fn[n+"_start"](i)),h&&(r?a=i:e=i),r=!r,3e3<++s)return gantt.assert(!1,"Invalid working time check"),!1}return(i==e||"past"==t.dir)&&(i=gantt.Fn.add(i,1,n)),i}},gantt.hc.pc(),gantt.wi=function(t){gantt.assert(t,"Invalid argument for gantt.getTask");var n=this.ne[t];return gantt.assert(n,"Task not found id="+t),n},gantt.zc=function(t,n){var i=this.ne,a=[];if(t||n)for(var e in t=+t||-1/0,n=+n||1/0,i){var r=i[e];+r.xa<n&&+r.Ja>t&&a.push(r)}else for(var e in i)a.push(i[e]);return a},gantt.Be=function(t){return gantt.D(this.ne[t])},gantt.di=function(t){return!!t.Uc||!t.xa},gantt.Go=function(t){return!(!t.Uc||!gantt.J.Tn)},gantt.Fo=function(t){if(!this.ne[t])return!1;var n=this.ne[t];return!(!(+n.xa<+this.$r&&+n.Ja>+this.Jr||gantt.Go(n))||void 0===this.ju[t])},gantt.Ns=function(t,n){return gantt.D(n)||(n=this.wi(t)),!1!==this.l("onBeforeTaskUpdate",[t,n])&&(this.ne[n.id]=n,this.Rc(n)||this.jc(n),this.Go(n)&&(this.Tu(n),this.Uu()),this.Es(n.id),this.Cs(n.id),this.l("onAfterTaskUpdate",[t,n]),this.ag(),void this.Sg())},gantt.Eu=function(t,n){var i=this.he(t);this.Pe(i)||(this.fe[i]=[]);for(var a=this.ge(i),e=!1,r=0,s=a.length;r<s;r++)if(a[r]==t.id){e=!0;break}e||(1*n==n?a.splice(n,0,t.id):a.push(t.id)),this.Hc(t)},gantt.Oc=function(t,n,i){this.ce(t,i),this.Hc(t),this.ue(n,t.id),this.Be(i)||i==this.J.Ot?this.Eu(t):delete this.fe[t.id],t.Ga=this.de(t),this.Gu(function(t){t.Ga=this.de(t)},t.id),this.ag()},gantt.jc=function(t){this.Oc(t,t.Nc,this.he(t))},gantt.Hc=function(t){t.Nc=this.he(t)},gantt.Rc=function(t){return t.Nc==this.he(t)},gantt.ue=function(t,n,i){var a=this.ge(t);if(a){for(var e=[],r=0;r<a.length;r++)a[r]!=n?e.push(a[r]):i&&e.push(i);this.fe[t]=e}this.ag()},gantt.Fc=function(t,n,i){return gantt.D(n)||(n=this.he(t)||0),this.Be(n)||(n=0),this.ce(t,n),t=this.Tu(t),!1!==this.l("onBeforeTaskAdd",[t.id,t])&&(this.ne[t.id]=t,this.Eu(t,i),this.l("onAfterTaskAdd",[t.id,t]),this.ae(),this.Sg(),t.id)},gantt.eu=function(t,n){var i=!(!n||n==this.J.Ot)&&this.wi(n),a="";if(i)a=i.xa;else{var e=this.Me[0];a=e?this.wi(e).xa?this.wi(e).xa:this.wi(e).Ja?this.bs(this.wi(e).Ja,-this.J.qt):"":this.J.xa||this.Ka().ws}return gantt.assert(a,"Invalid dates"),new Date(a)},gantt.Gc=function(t){t.xa=t.xa||gantt.eu(t,this.he(t)),t.duration=t.duration||this.J.qt,t.Ja=t.Ja||this.bs(t.xa,t.duration)},gantt.Ta=function(t,n,i){(t=t||{},gantt.D(t.id)||(t.id=gantt.M()),t.xa||(t.xa=gantt.eu(t,n)),void 0===t.text&&(t.text=gantt.locale.labels.gr),void 0===t.duration&&(t.duration=1),n)&&(this.ce(t,n),this.wi(n).gi=!0);return this.l("onTaskCreated",[t])?(this.J.ln?(t.Vc=!0,this.ne[t.id]=this.Tu(t),this.Eu(t,i),t.Ga=this.de(t),this.Bi(t.id),this.ae(),this.Ri(t.id)):this.Fc(t,n,i)&&(this.Pu(t.id),this.Bi(t.id)),t.id):null},gantt.Xc=function(t){return this.Yc(t)},gantt.Wc=function(t){var n=this.wi(t);if(!n)return[];for(var i=n.ko.concat(n.wo),a=this.ge(n.id),e=0;e<a.length;e++)i=i.concat(this.Wc(a[e]));var r={};for(e=0;e<i.length;e++)r[i[e]]=!0;for(var e in i=[],r)i.push(e);return i},gantt.le=function(t){var n=this.wi(t);if(!n)return[];for(var i=[],a=this.ge(n.id),e=0;e<a.length;e++)i.push(a[e]),i=i.concat(this.le(a[e]));return i},gantt.qc=function(t,n){var i=this.Jc&&!n,a="",e=!!i&&"off"!=this.Jc.$c;i&&(a=this.Jc.$c,this.Jc.Kc("off"));for(var r=0;r<t.length;r++)i&&(this.Jc.Qc("links"),this.Jc.Zc(t[r],!0,"deleted")),this.tf(t[r],!0);i&&(this.Jc.Kc(a),e&&this.Jc.nf())},gantt.if=function(t,n){var i=this.Jc&&!n,a="";i&&(a=this.Jc.$c,this.Jc.Qc("tasks"),this.Jc.Kc("off"));for(var e=this.le(t),r=0;r<e.length;r++){var s=e[r];this.af(s),i&&this.Jc.Zc(s,!0,"deleted")}i&&this.Jc.Kc(a)},gantt.af=function(t){var n=this.wi(t);this.ef(t,null),delete this.ne[t],this.Oc(n,this.he(n),null)},gantt.Yc=function(t,n){var i=this.wi(t);if(!n&&!1===this.l("onBeforeTaskDelete",[t,i]))return!1;var a=gantt.Wc(t);return this.if(t,n),this.qc(a,n),this.af(t),n||(this.l("onAfterTaskDelete",[t,i]),this.ae()),!0},gantt.rf=function(){this.sf(),this.l("onClear",[]),this.ae()},gantt.sf=function(){this.ne={},this.fe={},this.Me=[],this.mu=[],this.pu={},this.tg=[],this.ef(),this.hf={}},gantt.ef=function(t,n){void 0===t?(this.gf=this.uf=null,this.Qr.Zr&&(this.Qr.Zr.id=null)):(this.gf==t&&(this.gf=n),this.uf==t&&(this.uf=n),this.Qr.Zr&&this.Qr.Zr.id==t&&(this.Qr.Zr.id=n))},gantt.cf=function(t,n){var i=this.ne[n]=this.ne[t];for(var a in this.ne[n].id=n,delete this.ne[t],this.ef(t,n),this.ue(this.he(i),t,n),this.ne){var e=this.ne[a];this.he(e)==t&&(this.ce(e,n),this.jc(e))}for(var r=this.ff(i),s=0;s<r.length;s++){var h=this.Xs(r[s]);h.source==t&&(h.source=n),h.target==t&&(h.target=n)}this.l("onTaskIdChange",[t,n])},gantt.ff=function(t){var n=[];return t.ko&&(n=n.concat(t.ko)),t.wo&&(n=n.concat(t.wo)),n},gantt.df=function(){return 1e3*gantt.uh(this.J.rt)||this.J.rt},gantt.jh=function(t){return"task"},gantt.lf=function(t){for(var n in this.J.types)if(this.J.types[n]==t)return n;return"task"},gantt.vf=function(t){return this.hc.xc(t)},gantt._f=function(t){this.hc.lc(t)},gantt.pf=function(t){this.hc.mc(t)},gantt.Fr=function(t,n){return this.hc.wc(t,n||this.J.rt)},gantt.Hs=function(t){gantt.J.st&&gantt.J.ht&&(gantt.Fr(t.xa)?gantt.Fr(new Date(+t.Ja-1))||(t.Ja=gantt.bs(t.xa,t.duration)):(t.xa=gantt.js({Fn:t.xa,dir:"future"}),t.Ja=gantt.bs(t.xa,t.duration)))},gantt.js=function(t){var n=this.hc;return t instanceof Date&&(t={Fn:t}),t.dir=t.dir||"any",t.Er=t.Er||this.J.rt,n.Pc(t)},gantt.mf=function(t,n){return this.hc.Cc(t,n,this.J.rt,this.J.qt)},gantt.wf=function(t,n){return this.hc.Lc(t,n,this.J.rt,this.J.qt)},gantt.bs=function(t,n,i){var a=0<=n?1:-1;return this.hc.Bc(t,Math.abs(n),i||this.J.rt,a*this.J.qt)},gantt.Tu=function(t){gantt.D(t.id)||(t.id=gantt.M()),t.xa&&(t.xa=gantt.Fn.kf(t.xa,"xml_date")),t.Ja&&(t.Ja=gantt.Fn.kf(t.Ja,"xml_date"));var n=null;return(t.duration||0===t.duration)&&(n=t.duration),n&&(t.xa&&!t.Ja?t.Ja=this.bs(t.xa,t.duration):!t.xa&&t.Ja&&(t.xa=this.bs(t.Ja,-t.duration))),this.Go(t)&&this.Gc(t),gantt.xs(t),t.xa&&t.Ja&&gantt.Hs(t),t.ko=[],t.wo=[],void 0===t.parent&&this.ce(t,this.J.Ot),gantt.D(t.gi)||(t.gi=gantt.D(t.open)?t.open:this.J.Cn),t.Ga=this.de(t),t},gantt.xs=function(t){var n=this.jh(t.type);void 0===t.bf?t.bf=n:t.bf!=n&&(delete t.xf,delete t.yf,t.bf=n),void 0!==t.xf&&void 0!==t.yf||n==this.J.types.et||(n==this.J.types.at?(t.xf=t.yf=!0,this.Gc(t)):(t.xf=!(t.Ja||t.duration),t.yf=!t.xa,this.Go(t)&&(t.xf=t.yf=!1))),n==this.J.types.et&&(t.Ja=t.xa),t.xa&&t.Ja&&(t.duration=this.mf(t.xa,t.Ja)),t.duration=t.duration||0},gantt.Bs=function(t){return!(!t.xf&&!t.yf)},gantt.Qo=function(t){if(t.xf||t.yf){var n=this.lg(t.id);this.Df(t,n.xa,n.Ja)}},gantt.lg=function(t){var n=null,i=null,a=void 0!==t?t:gantt.J.Ot;return this.Gu(function(t){this.jh(t.type)==gantt.J.types.at||this.di(t)||(t.xa&&!t.yf&&(!n||n>t.xa.valueOf())&&(n=t.xa.valueOf()),t.Ja&&!t.xf&&(!i||i<t.Ja.valueOf())&&(i=t.Ja.valueOf()))},a),{xa:n?new Date(n):null,Ja:i?new Date(i):null}},gantt.Df=function(t,n,i){t.yf&&(t.xa=n&&n!=1/0?new Date(n):this.eu(t,this.he(t))),t.xf&&(t.Ja=i&&i!=-1/0?new Date(i):this.bs(t.xa,this.J.qt)),(t.yf||t.xf)&&this.xs(t)},gantt.Es=function(t,n){if(t){var i=this.wi(t),a=this.he(i),e=!0;if(i.yf||i.xf){var r=i.xa.valueOf(),s=i.Ja.valueOf();gantt.Qo(i),r==i.xa.valueOf()&&s==i.Ja.valueOf()&&(e=!1),e&&!n&&this.Cs(i.id,!0)}e&&a&&this.Be(a)&&this.Es(a,n)}},gantt.Le=function(t,n){if(!this.Be(t))return!1;if(n===this.J.Ot)return this.Be(t);for(var i=this.wi(t),a=this.he(t);i&&this.Be(a);){if((i=this.wi(a))&&i.id==n)return!0;a=this.he(i)}return!1},gantt.Us=function(t){t instanceof Date&&(t={Fn:t,Er:gantt.zs.Er,step:gantt.zs.step});var n,i,a,e=t.Fn,r=t.step,s=t.Er;if(s==gantt.zs.Er&&r==gantt.zs.step&&+e>=+gantt.Jr&&+e<=+gantt.$r)a=Math.floor(gantt._o(e)),gantt.zs.Or[a]||(a-=1),i=new Date(gantt.zs.Or[a]),n=new Date(i),n=gantt.zs.Or[a+1]?new Date(gantt.zs.Or[a+1]):gantt.Fn.add(i,r,s);else{for(a=Math.floor(gantt._o(e)),n=gantt.Fn[s+"_start"](new Date(this.Jr)),gantt.zs.Or[a]&&(n=gantt.Fn[s+"_start"](gantt.zs.Or[a]));+n<+e;){var h=(n=gantt.Fn[s+"_start"](gantt.Fn.add(n,r,s))).getTimezoneOffset();n=gantt.Kr(n,h,n,s),gantt.Fn[s+"_start"]&&(n=gantt.Fn[s+"_start"](n))}i=gantt.Fn.add(n,-1*r,s)}return t.dir&&"future"==t.dir?n:t.dir&&"past"==t.dir?i:Math.abs(e-i)<Math.abs(n-e)?i:n},gantt.attachEvent("onBeforeTaskUpdate",function(t,n){return gantt.xs(n),!0}),gantt.attachEvent("onBeforeTaskAdd",function(t,n){return gantt.xs(n),!0}),gantt.de=function(t){var n=0;return this.Vu(function(){n++},t),n},gantt.sort=function(i,t,n,a){var e=!a;this.Be(n)||(n=this.J.Ot),i||(i="order");var r="string"==typeof i?function(t,n){return t[i]==n[i]?0:t[i]>n[i]?1:-1}:i;if(t){var s=r;r=function(t,n){return s(n,t)}}var h=this.ge(n);if(h){for(var o=[],g=h.length-1;0<=g;g--)o[g]=this.ne[h[g]];o.sort(r);for(g=0;g<o.length;g++)h[g]=o[g].id,this.sort(i,t,h[g],!0)}e&&this.Tg()},gantt.Mf=function(t){for(var n=0;n<this.Me.length-1;n++)if(this.Me[n]==t)return this.Me[n+1];return null},gantt.Sf=function(t){for(var n=1;n<this.Me.length;n++)if(this.Me[n]==t)return this.Me[n-1];return null},gantt.Tf=function(t){var n=this.J.Ot;return t&&(n=t.parent),n},gantt.he=function(t){var n;return n=void 0!==t.id?t:gantt.wi(t),this.Tf(n)},gantt.ce=function(t,n){t.parent=n},gantt.Af=function(t){if(!this.Be(t))return[];var n=this.he(t);return this.ge(n)},gantt.If=function(t){for(var n=this.Af(t),i=0,a=n.length;i<a;i++)if(n[i]==t)return n[i+1]||null;return null},gantt._e=function(t){for(var n=this.Af(t),i=0,a=n.length;i<a;i++)if(n[i]==t)return n[i-1]||null;return null},gantt.Ef=function(o){function i(t){for(var n=o.Cf.slice(),i=!1,a=0;a<n.length&&!o.Lf[t];a++)n[a]==t&&("inserted"==gantt.Bf(t,"!nativeeditor_status")&&(i=!0),o.Zc(t,!1));return i}o.Pf("POST",!0),o.zf+=(-1!=o.zf.indexOf("?")?"&":"?")+"editing=true",o.Uf=o.zf,o.Rf={updated:"gantt_updated",order:"gantt_updated",jf:"gantt_inserted",Hf:"gantt_deleted",Of:"gantt_invalid",error:"gantt_error",clear:""},o.Nf=["_row_style","setCellTextStyle","_change_id","_delete_task"],o.Qc=function(t){var n=o.Ff||{};o.Gf&&(n[o.Gf]={Lf:o.Lf,Vf:o.Vf,Cf:o.Cf});var i=n[t];i||(i=n[t]={Lf:{},Vf:{},Cf:[]}),o.Lf=i.Lf,o.Vf=i.Vf,o.Cf=i.Cf,o.Ff=n,o.Gf=t},this.Xf=function(t,n){n.ve&&(o.Qc("tasks"),this.wi(t).target=n.ve,o.Zc(t,!0,"order"),delete this.wi(t).ve)},this.attachEvent("onAfterTaskAdd",function(t,n){o.Qc("tasks"),o.Zc(t,!0,"inserted")}),this.attachEvent("onAfterTaskUpdate",function(t,n){o.Qc("tasks"),o.Zc(t,!0),gantt.Xf(t,n)}),this.attachEvent("onAfterTaskDelete",function(t,n){o.Qc("tasks"),!i(t)&&(o.Zc(t,!0,"deleted"),"off"==o.$c||o.Yf||o.nf())}),this.attachEvent("onAfterLinkUpdate",function(t,n){o.Qc("links"),o.Zc(t,!0)}),this.attachEvent("onAfterLinkAdd",function(t,n){o.Qc("links"),o.Zc(t,!0,"inserted")}),this.attachEvent("onAfterLinkDelete",function(t,n){o.Qc("links"),!i(t)&&o.Zc(t,!0,"deleted")}),this.attachEvent("onRowDragEnd",function(t,n){gantt.Xf(t,gantt.wi(t))});var g=null,u=null;this.attachEvent("onTaskIdChange",function(t,n){if(o.Wf){var i=gantt.ge(n);if(i.length){g=g||{};for(var a=0;a<i.length;a++){var e=this.wi(i[a]);g[e.id]=e}}var r=this.wi(n),s=this.ff(r);if(s.length){u=u||{};for(a=0;a<s.length;a++){var h=this.Xs(s[a]);u[h.id]=h}}}}),o.attachEvent("onAfterUpdateFinish",function(){(g||u)&&(gantt.qf(function(){for(var t in g)gantt.Ns(g[t].id);for(var t in u)gantt.Jf(u[t].id);u=g=null}),g?gantt.Jc.Qc("tasks"):gantt.Jc.Qc("links"))}),o.attachEvent("onBeforeDataSending",function(){var t=this.Uf;if("REST"==this.$f){var n=this.Gf.substr(0,this.Gf.length-1);t=t.substring(0,-1<t.indexOf("?")?t.indexOf("?"):t.length),this.zf=t+("/"==t.slice(-1)?"":"/")+n}else this.zf=t+gantt.Kf(t)+"gantt_mode="+this.Gf;return!0}),this.Qf(o);var e=o.Zf;o.Zf=function(){var t;t=3==arguments.length?arguments[1]:arguments[4];var n=o.Gf,i=t.td;n="REST"!=this.$f?-1!=i.indexOf("gantt_mode=links")?"links":"tasks":i.indexOf("/link")>i.indexOf("/task")?"links":"tasks",o.Qc(n);var a=e.apply(o,arguments);return o.Qc(n),a},o.nd=gantt.bind(function(t,n){var i;i="tasks"==o.Gf?this.Be(t)?this.wi(t):{id:t}:this.Ig(t)?this.Xs(t):{id:t},i=gantt.m(i);var a={};for(var e in i)if("$"!=e.substr(0,1)){var r=i[e];r instanceof Date?a[e]=this.$.Kn(r):a[e]=null===r?"":r}return i.yf&&(i.xa="",i.duration=""),i.xf&&(i.Ja="",i.duration=""),a[o.ad]=this.Bf(t,o.ad),a},this),this.ed=gantt.bind(function(t,n){"tasks"!=o.Gf?this.rd(t,n):this.cf(t,n)},this),this.sd=function(t,n){"tasks"==o.Gf&&gantt.Be(t)&&(gantt.wi(t).qa=n,gantt.Cs(t))},this.hd=function(t,n){},this.Jc=o},gantt.Bf=function(t,n){return this.hf||(this.hf={}),this.hf[t]&&this.hf[t][n]?this.hf[t][n]:""},gantt.od=function(t,n,i){this.hf||(this.hf={}),this.hf[t]||(this.hf[t]={}),this.hf[t][n]=i},gantt.zu=function(t){return gantt.D(t.id)||(t.id=gantt.M()),t},gantt.Uu=function(){for(var t=null,n=0,i=this.mu.length;n<i;n++)(t=this.ne[this.mu[n]]).ko=[],t.wo=[];for(var a in this.tg=[],this.pu){var e=this.pu[a];this.tg.push(e),this.ne[e.source]&&this.ne[e.source].ko.push(a),this.ne[e.target]&&this.ne[e.target].wo.push(a)}},gantt.Xs=function(t){return gantt.assert(this.pu[t],"Link doesn't exist"),this.pu[t]},gantt.gd=function(t,n){var i=null,a=n?t.target:t.source;gantt.Be(a)&&(i=gantt.wi(a));var e=n?"target":"source";return gantt.assert(i,"Link "+e+" not found. Task id="+a+", link id="+t.id),i},gantt.ud=function(t){return gantt.gd(t,!0)},gantt.fd=function(t){return gantt.gd(t,!1)},gantt.dd=function(){var t=[];for(var n in gantt.pu)t.push(gantt.pu[n]);return t},gantt.Ig=function(t){return gantt.D(this.pu[t])},gantt.Yh=function(t){return t=this.zu(t),!1!==this.l("onBeforeLinkAdd",[t.id,t])&&(this.pu[t.id]=t,this.Uu(),this.Vs(t.id),this.l("onAfterLinkAdd",[t.id,t]),t.id)},gantt.Jf=function(t,n){return gantt.D(n)||(n=this.Xs(t)),!1!==this.l("onBeforeLinkUpdate",[t,n])&&(this.pu[t]=n,this.Uu(),this.Vs(t),this.l("onAfterLinkUpdate",[t,n]),!0)},gantt.Yo=function(t){return this.tf(t)},gantt.tf=function(t,n){var i=this.Xs(t);return!(!n&&!1===this.l("onBeforeLinkDelete",[t,i]))&&(delete this.pu[t],this.Uu(),this.Ag(t),n||this.l("onAfterLinkDelete",[t,i]),!0)},gantt.rd=function(t,n){this.pu[t]&&(this.pu[n]=this.pu[t],this.pu[n].id=n,delete this.pu[t],this.Uu(),this.l("onLinkIdChange",[t,n]))},gantt.ge=function(t){return gantt.D(this.fe[t])?this.fe[t]:[]},gantt.Pe=function(t){return gantt.D(this.fe[t])&&this.fe[t].length},gantt.ae=function(){this.ng()},gantt.ld=function(t){return!(t.type&&t.type==gantt.J.types.at||t.yf||t.xf)},gantt.vd=function(t){return!this.ld(t)},gantt._d=function(t,n,i){for(var a in n)(void 0===t[a]||i)&&(t[a]=n[a])},gantt.pd=function(){gantt.md(!1),gantt.pd=function(){}},gantt.md=function(t){var n=gantt.wd;if(!n||t)for(var i=document.getElementsByTagName("link"),a=0;a<i.length;a++){var e=i[a].href.match("dhtmlxgantt_([a-z_]+).css");if(e&&(gantt.kd[e[1]]||!n)){n=e[1];break}}gantt.wd=n||"terrace";var r=gantt.kd[gantt.wd]||gantt.kd.bd;this._d(gantt.J,r.J,t);var s=gantt.Ba();s[1]&&void 0===s[1].width&&(s[1].width=r.xd),s[2]&&void 0===s[2].width&&(s[2].width=r.yd),r.Dd&&(gantt.Dd=r.Dd),gantt.Md()},gantt.Sd=function(){this.wd="",this.md(!0)},gantt.kd={},gantt.Td={},gantt.Dd="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",gantt.Ri=function(t){if(t&&!gantt.xe(this.wi(t))&&this.l("onBeforeLightbox",[t])){var n=this.wi(t),i=this.Ad(this.jh(n.type));this.Id(i),this.Ed(),this.Cd(t,i),this.ja.Xe(i),this.l("onLightbox",[t])}},gantt.Ld=function(){if(this.J.jt){var t=gantt.zs,n=this.uh(t.Er)*t.step/60;return(1440<=n||!this.ee())&&(n=this.J.Wt),n}return this.J.Wt},gantt.Bd=function(t,n){for(var i=this.Pd(),a=0;a<i.length;a++)if(i[a].gn==t)for(var e=i[a].options,r=0;r<e.length;r++)if(e[r].key==n)return e[r].label;return""},gantt.zd=function(t,n){n=n.slice(0);var i=gantt.Ru(t);return!!i&&(i.splice(0,i.length),i.push.apply(i,n||[]),void gantt.Md())},gantt.Ud=function(){return this.jh(this.Rd)},gantt.Ad=function(t){if(void 0===t&&(t=this.Ud()),!this.jd||this.Ud()!=this.jh(t)){this.Rd=this.jh(t);var n=document.createElement("DIV");n.className="gantt_cal_light";var i=this.Hd();(gantt.J.Od||i)&&(n.className+=" gantt_cal_light_wide"),i&&(gantt.J.Od=!0,n.className+=" gantt_cal_light_full"),n.style.visibility="hidden";for(var a=this.Dd,e=this.J.nn,r=0;r<e.length;r++){var s=this.J.in[e[r]]?this.J.in[e[r]]:e[r];a+="<div "+this.ja.We(s)+" class='gantt_btn_set gantt_left_btn_set "+s+"_set'><div dhx_button='1' class='"+s+"'></div><div>"+this.locale.labels[s]+"</div></div>"}e=this.J.sn;for(r=0;r<e.length;r++){s=this.J.in[e[r]]?this.J.in[e[r]]:e[r];a+="<div "+this.ja.We(s)+" class='gantt_btn_set gantt_right_btn_set "+s+"_set' style='float:right;'><div dhx_button='1' class='"+s+"'></div><div>"+this.locale.labels[s]+"</div></div>"}a+="</div>",n.innerHTML=a,gantt.ja.Ye(n),gantt.J.dn&&(n.firstChild.onmousedown=gantt.Nd,n.firstChild.onselectstart=function(){return!1},n.firstChild.style.cursor="pointer",gantt.Fd()),document.body.insertBefore(n,document.body.firstChild),this.jd=n;var h=this.Pd(t);a=this.Gd(h);var o=n.getElementsByTagName("div");for(r=0;r<o.length;r++){var g=o[r];if("gantt_cal_larea"==g.className){g.innerHTML=a;break}}for(r=0;r<h.length;r++){var u=h[r];if(u.id&&document.getElementById(u.id)){var c=document.getElementById(u.id),f=c.querySelector("label"),d=c.nextSibling;if(d){var l=d.querySelector("input, select, textarea");l&&(u.Vd=l.id||"input_"+gantt.M(),l.id||(l.id=u.Vd),f.setAttribute("for",u.Vd))}}}this.Xd(),this.Yd(this),n.style.display="none",n.style.visibility="visible"}return this.jd},gantt.Gd=function(t){for(var n="",i=0;i<t.length;i++){var a=this.Wd[t[i].type];if(a){t[i].id="area_"+this.M();var e=t[i].hidden?" style='display:none'":"",r="";t[i].button&&(r="<div class='gantt_custom_button' index='"+i+"'><div class='gantt_custom_button_"+t[i].button+"'></div><div>"+this.locale.labels["button_"+t[i].button]+"</div></div>"),this.J.Od&&(n+="<div class='gantt_wrap_section' "+e+">"),n+="<div id='"+t[i].id+"' class='gantt_cal_lsection'><label>"+r+this.locale.labels["section_"+t[i].name]+"</label></div>"+a.Tg.call(this,t[i]),n+="</div>"}}return n},gantt.Xd=function(){var t=this.jd;if(t){var n=t.childNodes[1];n.style.height="0px",n.style.height=n.scrollHeight+"px",t.style.height=n.scrollHeight+this.J.qd+"px",n.style.height=n.scrollHeight+"px"}},gantt.Id=function(t){if(t){t.style.display="block";var n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,a=window.innerHeight||document.documentElement.clientHeight;t.style.top=n?Math.round(n+Math.max((a-t.offsetHeight)/2,0))+"px":Math.round(Math.max((a-t.offsetHeight)/2,0)+9)+"px",document.documentElement.scrollWidth>document.body.offsetWidth?t.style.left=Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":t.style.left=Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}},gantt.Ed=function(){if(!this.Jd){this.Jd=document.createElement("DIV"),this.Jd.className="gantt_cal_cover";var t=void 0!==document.height?document.height:document.body.offsetHeight,n=document.documentElement?document.documentElement.scrollHeight:0;this.Jd.style.height=Math.max(t,n)+"px",document.body.appendChild(this.Jd)}},gantt.Yd=function(){gantt.$d={},gantt.$d.Vn=function(t){gantt.Kd()},gantt.$d.qn=function(t){gantt.l("onLightboxDelete",[gantt.gf])&&(gantt.Be(gantt.gf)?gantt.Qd.buttons.delete(gantt.gf):gantt.Zd())},gantt.$d.Yn=function(t){gantt.tl()},gantt.$d.default=function(t,n){if(n.getAttribute("dhx_button"))gantt.l("onLightboxButton",[n.className,n,t]);else{var i,a,e=gantt.zi(n);-1!=e.indexOf("gantt_custom_button")&&(-1!=e.indexOf("gantt_custom_button_")?(i=n.parentNode.getAttribute("index"),a=n.parentNode.parentNode):(i=n.getAttribute("index"),a=n.parentNode,n=n.firstChild));var r=gantt.Pd();i&&gantt.Wd[r[i].type].nl(i,n,a,a.nextSibling)}},this.event(gantt.Ad(),"click",function(t){var n=(t=t||window.event).target?t.target:t.srcElement,i=gantt.zi(n);return i||(n=n.previousSibling,i=gantt.zi(n)),n&&i&&0===i.indexOf("gantt_btn_set")&&(n=n.firstChild,i=gantt.zi(n)),!(!n||!i)&&(gantt.D(gantt.$d[n.className])?gantt.$d[n.className]:gantt.$d.default)(t,n)}),gantt.Ad().onkeydown=function(t){var n=t||window.event,i=t.target||t.srcElement,a=!!(-1<gantt.zi(i).indexOf("gantt_btn_set"));switch((t||n).keyCode){case 32:if((t||n).shiftKey)return;a&&i.click&&i.click();break;case gantt.keys.Rn:if((t||n).shiftKey)return;a&&i.click?i.click():gantt.Kd();break;case gantt.keys.jn:gantt.tl()}}},gantt.tl=function(){var t=this.il();this.l("onLightboxCancel",[this.gf,t.Vc]),gantt.Be(t.id)&&t.Vc&&this.Yc(t.id,!0),this.ae(),this.Zd()},gantt.Kd=function(){var t=this.il();this.l("onLightboxSave",[this.gf,t,!!t.Vc])&&(t.Vc?(delete t.Vc,this.ue(this.he(t.id),t.id),this.Fc(t)):this.Be(t.id)&&(this.k(this.wi(t.id),t,!0),this.Ns(t.id)),this.ae(),this.Zd())},gantt.al=function(t){var n=t.gn;return{time:!0,el:!0,duration:!0,rl:!0}[t.type]&&("auto"==t.gn?n={xa:"start_date",Ja:"end_date",duration:"duration"}:"string"==typeof t.gn&&(n={xa:t.gn})),n},gantt.il=function(){var t={};gantt.Be(this.gf)&&(t=this.k({},this.wi(this.gf)));for(var n=this.Pd(),i=0;i<n.length;i++){var a=document.getElementById(n[i].id);a=a?a.nextSibling:a;var e=this.Wd[n[i].type];if(e){var r=e.sl.call(this,a,t,n[i]),s=gantt.al(n[i]);if("string"==typeof s&&"auto"!=s)t[s]=r;else if("object"==typeof s)for(var h in s)s[h]&&(t[s[h]]=r[h])}}return t},gantt.Zd=function(){var t=this.Ad();t&&(t.style.display="none"),this.ja.Ve(t),this.gf=null,this.hl(),this.l("onAfterLightbox",[])},gantt.hl=function(){this.Jd&&this.Jd.parentNode.removeChild(this.Jd),this.Jd=null},gantt.Md=function(){gantt.jd&&!gantt.ol&&gantt.jd.parentNode.removeChild(gantt.jd),gantt.jd=null},gantt.gl=function(t,n){var i=t,a=n.getElementsByTagName("span"),e=[];gantt.$.ul?(e.push(""),e.push(gantt.$.ul(i.xa,i.Ja,i)),a[1].innerHTML="",a[2].innerHTML=gantt.$.ul(i.xa,i.Ja,i)):(e.push(this.$._i(i.xa,i.Ja,i)),e.push((this.$.ti(i.xa,i.Ja,i)||"").substr(0,70)),a[1].innerHTML=this.$._i(i.xa,i.Ja,i),a[2].innerHTML=(this.$.ti(i.xa,i.Ja,i)||"").substr(0,70)),a[1].innerHTML=e[0],a[2].innerHTML=e[1],gantt.ja.$e(n,e.join(" "));for(var r=this.Pd(this.Ud()),s=0;s<r.length;s++){var h=r[s];if(this.Wd[h.type]){var o=document.getElementById(h.id).nextSibling,g=this.Wd[h.type],u=gantt.al(r[s]),c=this.D(i[u])?i[u]:h.cl;g.fl.call(gantt,o,c,i,h),h.focus&&g.focus.call(gantt,o)}}t.id&&(gantt.gf=t.id)},gantt.Cd=function(t,n){var i=this.wi(t);this.gl(i,n)},gantt.dl=function(t){for(var n=this.Pd(),i=0;i<n.length&&n[i].name!=t;i++);var a=n[i];if(!a)return null;this.jd||this.Ad();var e=document.getElementById(a.id),r=e.nextSibling,s={ll:a,vl:e,oo:r,_l:function(t){return gantt.Wd[a.type].sl.call(gantt,r,t||{},a)},pl:function(t,n){return gantt.Wd[a.type].fl.call(gantt,r,t,n||{},a)}},h=this.Td["get_"+a.type+"_control"];return h?h(s):s},gantt.Td.ml=function(t){return t.control=t.oo,t},gantt.Td.wl=function(t){return t.control=t.oo.getElementsByTagName("select")[0],t},gantt.Td.kl=function(t){return t.control=t.oo.getElementsByTagName("textarea")[0],t},gantt.Td.bl=function(t){return t.control=t.oo.getElementsByTagName("select"),t},gantt.Fd=function(){this.event(document.body,"mousemove",gantt.xl),this.event(document.body,"mouseup",gantt.yl),gantt.Fd=function(){}},gantt.xl=function(t){if(gantt.Dl){document.Ml||(document.body.className+=" gantt_unselectable",document.Ml=!0);var n=gantt.Ad(),i=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY];n.style.top=gantt.Sl[1]+i[1]-gantt.Dl[1]+"px",n.style.left=gantt.Sl[0]+i[0]-gantt.Dl[0]+"px"}},gantt.Nd=function(t){var n=gantt.Ad();gantt.Sl=[parseInt(n.style.left,10),parseInt(n.style.top,10)],gantt.Dl=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY]},gantt.yl=function(){gantt.Sl&&(gantt.Sl=gantt.Dl=!1,document.body.className=document.body.className.replace(" gantt_unselectable",""),document.Ml=!1)},gantt.Tl=function(t,n){if(t&&t.focus)if(gantt.J.Ji);else try{n&&t.select&&t.select(),t.focus()}catch(t){}},gantt.Wd={Al:function(t,n){if(!(i=t.Il)){var i=["%d","%m","%Y"];gantt.uh(gantt.zs.Er)<gantt.uh("day")&&i.push("%H:%i")}t.El={size:0};var a=this.J,e=this.Fn.Cl(new Date(gantt.Jr.valueOf())),r=1440,s=0;gantt.J.Ll&&(r=60*a.Bl+1,s=60*a.Pl,e.setHours(a.Pl));for(var h="",o=0;o<i.length;o++){var g=i[o];0<o&&(h+=" ");var u="";switch(g){case"%Y":var c,f,d,l;t.El[2]=o,t.El.size++,t.zl&&(isNaN(t.zl)?t.zl.push&&(d=t.zl[0],l=t.zl[1]):c=t.zl),c=c||10,f=f||Math.floor(c/2),d=d||e.getFullYear()-f,l=l||d+c;for(var v=d;v<l;v++)u+="<option value='"+v+"'>"+v+"</option>";break;case"%m":t.El[1]=o,t.El.size++;for(v=0;v<12;v++)u+="<option value='"+v+"'>"+this.locale.Fn.Ul[v]+"</option>";break;case"%d":t.El[0]=o,t.El.size++;for(v=1;v<32;v++)u+="<option value='"+v+"'>"+v+"</option>";break;case"%H:%i":t.El[3]=o,t.El.size++;v=s;var _=e.getDate();for(t.Rl=[];v<r;){u+="<option value='"+v+"'>"+this.$.Kt(e)+"</option>",t.Rl.push(v),e.setTime(e.valueOf()+60*this.Ld()*1e3),v=24*(e.getDate()!=_?1:0)*60+60*e.getHours()+e.getMinutes()}}if(u){var p=gantt.ja.Ke(g);h+="<select "+(t.It?"disabled='disabled'":"")+(n?" style='display:none' ":"")+p+">"+u+"</select>"}}return h},jl:function(t,n,i,a,e){if(t[n+a[0]].value=i.getDate(),t[n+a[1]].value=i.getMonth(),t[n+a[2]].value=i.getFullYear(),gantt.D(a[3])){var r=60*i.getHours()+i.getMinutes();r=Math.round(r/gantt.Ld())*gantt.Ld();var s=t[n+a[3]];s.value=r,s.setAttribute("data-value",r)}},Fa:{Tg:function(t){return"<div class='gantt_cal_ltext gantt_cal_template' style='height:"+((t.height||"30")+"px")+";'></div>"},fl:function(t,n,i,a){t.innerHTML=n||""},sl:function(t,n,i){return t.innerHTML||""},focus:function(t){}},A:{Tg:function(t){return"<div class='gantt_cal_ltext' style='height:"+((t.height||"130")+"px")+";'><textarea></textarea></div>"},fl:function(t,n,i){this.Wd.A.Hl(t).value=n||""},sl:function(t,n){return this.Wd.A.Hl(t).value},focus:function(t){var n=this.Wd.A.Hl(t);gantt.Tl(n,!0)},Hl:function(t){return t.querySelector("textarea")}},select:{Tg:function(t){for(var n="<div class='gantt_cal_ltext' style='height:"+((t.height||"23")+"px")+";'><select style='width:100%;'>",i=0;i<t.options.length;i++)n+="<option value='"+t.options[i].key+"'>"+t.options[i].label+"</option>";return n+"</select></div>"},fl:function(t,n,i,a){var e=t.firstChild;!e.Ol&&a.onchange&&(e.onchange=a.onchange,e.Ol=!0),void 0===n&&(n=(e.options[0]||{}).value),e.value=n||""},sl:function(t,n){return t.firstChild.value},focus:function(t){var n=t.firstChild;gantt.Tl(n,!0)}},time:{Tg:function(t){var n=this.Wd.Al.call(this,t),i=["<div style='height:"+(t.height||30)+"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>"];return i.push(n),t.fn?(n=this.Wd.Al.call(this,t,!0),i.push("<span></span>")):i.push("<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"),i.push(n),i.push("</div>"),i.join("")},fl:function(t,n,i,a){var e=a,r=t.getElementsByTagName("select"),s=a.El;if(a.Nl,e.Fl)for(var h=function(){u=new Date(r[s[2]].value,r[s[1]].value,r[s[0]].value,0,0),c=gantt.bs(u,1),this.Wd.jl(r,s.size,c,s,e)},o=0;o<4;o++)r[o].onchange=h;var g=gantt.al(a);"string"==typeof g&&(g={xa:g});var u=i[g.xa]||new Date,c=i[g.Ja]||gantt.bs(u,1);this.Wd.jl(r,0,u,s,e),this.Wd.jl(r,s.size,c,s,e)},sl:function(t,n,i){var a=t.getElementsByTagName("select"),e=i.El,r=0,s=0;if(gantt.D(e[3])){var h=parseInt(a[e[3]].value,10);r=Math.floor(h/60),s=h%60}var o=new Date(a[e[2]].value,a[e[1]].value,a[e[0]].value,r,s);if(r=s=0,gantt.D(e[3])){h=parseInt(a[e.size+e[3]].value,10);r=Math.floor(h/60),s=h%60}var g=new Date(a[e[2]+e.size].value,a[e[1]+e.size].value,a[e[0]+e.size].value,r,s);g<=o&&(g=gantt.Fn.add(o,gantt.Ld(),"minute"));var u=gantt.al(i),c={xa:new Date(o),Ja:new Date(g)};return"string"==typeof u?c.xa:c},focus:function(t){gantt.Tl(t.getElementsByTagName("select")[0])}},duration:{Tg:function(t){var n=this.Wd.Al.call(this,t);n="<div class='gantt_time_selects'>"+n+"</div>";var i=this.locale.labels[this.J.rt+"s"],a=t.fn?' style="display:none"':"",e=t.It?" disabled='disabled'":"",r="<div class='gantt_duration' "+a+"><input type='button' class='gantt_duration_dec' value='−'"+e+"><input type='text' value='5' class='gantt_duration_value'"+e+" "+this.ja.ar(t)+"><input type='button' class='gantt_duration_inc' value='+'"+e+"> "+i+" <span></span></div>";return"<div style='height:"+(t.height||30)+"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>"+n+" "+r+"</div>"},fl:function(a,t,n,e){function i(){var t=gantt.Wd.duration.Gl.call(gantt,a,e),n=gantt.Wd.duration.Vl.call(gantt,a,e),i=gantt.bs(t,n);c.innerHTML=gantt.$.$t(i)}function r(t){var n=g.value;n=parseInt(n,10),window.isNaN(n)&&(n=0),(n+=t)<1&&(n=1),g.value=n,i()}var s=e,h=a.getElementsByTagName("select"),o=a.getElementsByTagName("input"),g=o[1],u=[o[0],o[2]],c=a.getElementsByTagName("span")[0],f=e.El;u[0].onclick=gantt.bind(function(){r(-1*this.J.qt)},this),u[1].onclick=gantt.bind(function(){r(1*this.J.qt)},this),h[0].onchange=i,h[1].onchange=i,h[2].onchange=i,h[3]&&(h[3].onchange=i),g.onkeydown=gantt.bind(function(t){var n=(t=t||window.event).charCode||t.keyCode||t.which;return 40==n?(r(-1*this.J.qt),!1):38==n?(r(1*this.J.qt),!1):void window.setTimeout(function(t){i()},1)},this),g.onchange=gantt.bind(function(t){i()},this);var d=gantt.al(e);"string"==typeof d&&(d={xa:d});var l=n[d.xa]||new Date,v=n[d.Ja]||gantt.bs(l,1),_=Math.round(n[d.duration])||gantt.mf(l,v);gantt.Wd.jl(h,0,l,f,s),g.value=_,i()},Gl:function(t,n){var i=t.getElementsByTagName("select"),a=n.El,e=0,r=0;if(gantt.D(a[3])){var s=i[a[3]],h=parseInt(s.value,10);isNaN(h)&&s.hasAttribute("data-value")&&(h=parseInt(s.getAttribute("data-value"),10)),e=Math.floor(h/60),r=h%60}return new Date(i[a[2]].value,i[a[1]].value,i[a[0]].value,e,r)},Vl:function(t,n){var i=t.getElementsByTagName("input")[1];return(!(i=parseInt(i.value,10))||window.isNaN(i))&&(i=1),i<0&&(i*=-1),i},sl:function(t,n,i){var a=gantt.Wd.duration.Gl(t,i),e=gantt.Wd.duration.Vl(t,i),r=gantt.bs(a,e),s=gantt.al(i),h={xa:new Date(a),Ja:new Date(r),duration:e};return"string"==typeof s?h.xa:h},focus:function(t){gantt.Tl(t.getElementsByTagName("select")[0])}},parent:{Xl:function(t,n,i){var a=n.filter||function(){return!0};t=t.slice(0);for(var e=0;e<t.length;e++){var r=t[e];(r.id==i||gantt.Le(r.id,i)||!1===a(r.id,r))&&(t.splice(e,1),e--)}return t},Yl:function(t,n){var i=[],a=[];n&&(i=gantt.zc(),t.Wl&&i.unshift({id:gantt.J.Ot,text:t.ql||""}),i=this.Xl(i,t,n),t.sort&&i.sort(t.sort));for(var e=t.Fa||gantt.$.ti,r=0;r<i.length;r++){var s=e.apply(gantt,[i[r].xa,i[r].Ja,i[r]]);void 0===s&&(s=""),a.push({key:i[r].id,label:s})}return t.options=a,t.gn=t.gn||"parent",gantt.Wd.select.Tg.apply(this,arguments)},Tg:function(t){return gantt.Wd.parent.Yl(t,!1)},fl:function(t,n,i,a){var e=document.createElement("div");e.innerHTML=gantt.Wd.parent.Yl(a,i.id);var r=e.removeChild(e.firstChild);return t.onselect=null,t.parentNode.replaceChild(r,t),gantt.Wd.select.fl.apply(gantt,[r,n,i,a])},sl:function(){return gantt.Wd.select.sl.apply(gantt,arguments)},focus:function(){return gantt.Wd.select.focus.apply(gantt,arguments)}}},gantt.Hd=function(){for(var t=this.Pd(),n=0;n<t.length;n++)if("time"==t[n].name&&"time"==t[n].type)return!0;return!1},gantt.Xo=function(t,n,i,a){if(!t)return i();var e={text:t};n&&(e.title=n),a&&(e.ok=a),i&&(e.Jl=function(t){t&&i()}),gantt.confirm(e)},gantt.Pd=function(t){void 0===t&&(t=this.Ud());var n=this.lf(t);return gantt.J.hn[n+"_sections"]?gantt.J.hn[n+"_sections"]:gantt.J.hn.on},gantt.$l=function(t){var n=this.Ud();if(this.Ka().hn){var i=this.Ka().hn,a=this.il(),e=this.m(this.wi(i));this.Md();var r=this.k(e,a,!0),s=this.Ad(t||void 0);this.Id(this.Ad()),this.gl(r,s)}else this.Md(),this.Ad(t||void 0);this.l("onLightboxChange",[n,this.Ud()])},gantt.Kl=function(t){var h=t,o={Tg:h.Tg,focus:h.focus,fl:function(t,n,i,a){var e=gantt.al(a);if(!i[e.xa]||"start_date"==e.xa&&this.Go(i)){o.disable(t,a);var r={};for(var s in e)r[e[s]]=i[s];return h.fl.call(gantt,t,n,r,a)}return o.enable(t,a),h.fl.call(gantt,t,n,i,a)},sl:function(t,n,i){return i.disabled?{xa:null}:h.sl.call(gantt,t,n,i)},Ql:function(t,n){if(gantt.l("onSectionToggle",[gantt.gf,n]),t.style.display=n.disabled?"none":"block",n.button){var i=t.previousSibling.firstChild.firstChild,a=gantt.locale.labels,e=n.disabled?a[n.name+"_enable_button"]:a[n.name+"_disable_button"];i.nextSibling.innerHTML=e}gantt.Xd()},disable:function(t,n){n.disabled=!0,o.Ql(t,n)},enable:function(t,n){n.disabled=!1,o.Ql(t,n)},nl:function(t,n,i,a){if(!1!==gantt.l("onSectionButton",[gantt.gf,i])){var e=gantt.Pd()[t];e.disabled?o.enable(a,e):o.disable(a,e)}}};return o},gantt.Wd.rl=gantt.Kl(gantt.Wd.duration),gantt.Wd.el=gantt.Kl(gantt.Wd.time),gantt.Zl=function(t){return this.zf=t,this.ad="!nativeeditor_status",this.object=null,this.Cf=[],this.tv=!0,this.$c="cell",this.$f="GET",this.nv=null,this.iv=null,this.av="_",this.Wf=0,this.Lf={},this.Vf={},this.ev=[],this.rv=[],this.Rf={updated:"font-weight:bold;",jf:"font-weight:bold;",Hf:"text-decoration : line-through;",Of:"background-color:FFE0E0;",sv:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.hv(!0),gantt.i(this),this},gantt.Zl.prototype={Pf:function(t,n){"object"==typeof t?(this.$f=t.mode||this.$f,this.nv=this.nv||t.headers,this.iv=this.iv||t.ov):(this.$f=t,this.Yf=n),"REST"==this.$f&&(this.Yf=!1,this.gv=!0)},escape:function(t){return this.uv?encodeURIComponent(t):escape(t)},hv:function(t){this.uv=!!t},cv:function(t){this.fv="string"==typeof t?t.split(","):t},dv:function(){return!this.Cf.length},lv:function(t){this.gv=!!t},vv:function(t){this._v=!!t},Kc:function(t,n){this.tv="cell"==t,this.$c=t,this.pv=n},Rt:function(t,n){this.s=!0,t.call(n||window),this.s=!1},Zc:function(t,n,i){if(!this.s){var a=this.mv(t);i=i||"updated";var e=this.fa.Bf(t,this.ad);e&&"updated"==i&&(i=e),n?(this.wv(t,!1),this.Cf[a]=t,this.fa.od(t,this.ad,i),this.Lf[t]&&(this.Lf[t]="wait")):this.kv(t)||(this.Cf.splice(a,1),this.fa.od(t,this.ad,"")),n||this.bv(t),this.xv(t,n,i),n&&this.tv&&this.yv(t)}},bv:function(t){},xv:function(t,n,i){var a="",e=this.kv(t);if(e&&(a=this.Rf[e],n=!0),this.l("onRowMark",[t,n,i,e])&&(a=this.Rf[n?i:"clear"]+a,this.fa[this.Nf[0]](t,a),e&&e.Dv)){a+=this.Rf[e+"_cell"];for(var r=0;r<e.Dv.length;r++)e.Dv[r]&&this.fa[this.Nf[1]](t,r,a)}},Ka:function(t){return this.fa.Bf(t,this.ad)},kv:function(t){return this.Vf[t]},wv:function(t,n,i){i&&(n={value:n,Dv:i,toString:function(){return this.value.toString()}}),this.Vf[t]=n},Mv:function(t){return!0},yv:function(t){return!this.Wf||"tree"!=this.fa.Sv&&!this.fa.Tv?(this.fa.Av&&this.fa.Av(),void 0===t||this.Yf?this.nf():!this.Lf[t]&&(this.rv=[],!(!this.Mv(t)&&this.l("onValidationError",[t,this.rv]))&&void this.Iv(this.nd(t),t))):void 0},Iv:function(t,n){return!!this.l("onBeforeUpdate",[n,this.Ka(n),t])&&void this.Ev(t,n)},Du:function(t,n){if("string"==typeof t)return t;if(void 0!==n)return this.Cv(t,"");var i=[],a=[];for(var e in t)t.hasOwnProperty(e)&&(i.push(this.Cv(t[e],e+this.av)),a.push(e));return i.push("ids="+this.escape(a.join(","))),gantt.Yu&&i.push("dhx_security="+gantt.Yu),i.join("&")},Cv:function(t,n){if("string"==typeof t)return t;var i=[];for(var a in t)if(t.hasOwnProperty(a)){if(("id"==a||a==this.ad)&&"REST"==this.$f)continue;i.push(this.escape((n||"")+a)+"="+this.escape(t[a]))}return i.join("&")},Ev:function(a,e){if(a){if(!this.l("onBeforeDataSending",e?[e,this.Ka(e),a]:[null,null,a]))return!1;e&&(this.Lf[e]=(new Date).valueOf());var r=this,t=function(t){var n=[];if(e)n.push(e);else if(a)for(var i in a)n.push(i);return r.Zf(r,t,n)},n=this.zf+(this.Lv?gantt.Kf(this.zf)+["dhx_user="+this.Lv,"dhx_version="+this.fa.Bf(0,"version")].join("&"):"");if("GET"==this.$f)gantt.bu.get(n+(-1!=n.indexOf("?")?"&":"?")+this.Du(a,e),t);else if("POST"==this.$f)gantt.bu.Bv(n,this.Du(a,e),t);else if("REST"==this.$f){var i=this.Ka(e),s=n.replace(/(\&|\?)editing\=true/,""),h="",o="post";if("inserted"==i?h=this.Du(a,e):s=("deleted"==i?o="DELETE":(o="PUT",h=this.Du(a,e)),s+("/"==s.slice(-1)?"":"/")+e),this.iv)for(var g in this.iv)s=s+this.Kf(s)+this.escape(g)+"="+this.escape(this.iv[g]);gantt.bu.Pv({url:s,method:o,headers:this.nv,data:h,Jl:t})}this.Wf++}},nf:function(){if(this.Cf.length){this.rv=[];for(var t=!0,n=0;n<this.Cf.length;n++)t&=this.Mv(this.Cf[n]);if(!t&&!this.l("onValidationError",["",this.rv]))return!1;if(this.Yf)this.Ev(this.zv());else for(n=0;n<this.Cf.length;n++)if(!this.Lf[this.Cf[n]]){if(this.kv(this.Cf[n]))continue;if(this.Iv(this.nd(this.Cf[n]),this.Cf[n]),this.Wf&&("tree"==this.fa.Sv||this.fa.Tv))return}}},zv:function(t){for(var n={},i=!1,a=0;a<this.Cf.length;a++){var e=this.Cf[a];this.Lf[e]||this.kv(e)||this.l("onBeforeUpdate",[e,this.Ka(e),this.nd(e)])&&(n[e]=this.nd(e,e+this.av),i=!0,this.Lf[e]=(new Date).valueOf())}return i?n:null},Uv:function(t,n){this.ev[t]=n||function(t){return""!==t}},Rv:function(t){this.ev[t]=!1},mv:function(t){var n=0;for(n=0;n<this.Cf.length&&t!=this.Cf[n];n++);return n},jv:function(t,n){this.Hv||(this.Hv=[]),this.Hv[t]=n},Ov:function(t,n,i,a){var e=t,r="error"!=i&&"invalid"!=i;if(r||this.wv(t,i),this.Hv&&this.Hv[i]&&!this.Hv[i](a))return delete this.Lf[e];"wait"!=this.Lf[e]&&this.Zc(t,!1);var s=t;switch(i){case"inserted":case"insert":n!=t&&(this.Zc(t,!1),this.fa[this.Nf[2]](t,n),t=n);break;case"delete":case"deleted":return this.fa.od(t,this.ad,"true_deleted"),this.fa[this.Nf[3]](t),delete this.Lf[e],this.l("onAfterUpdate",[t,i,n,a])}"wait"!=this.Lf[e]?(r&&this.fa.od(t,this.ad,""),delete this.Lf[e]):(delete this.Lf[e],this.Zc(n,!0,this.fa.Bf(t,this.ad))),this.l("onAfterUpdate",[s,i,n,a])},Zf:function(t,n,i){if(window.JSON){var a;try{a=JSON.parse(n.yu.responseText)}catch(t){n.yu.responseText.length||(a={})}if(a){var e=a.action||this.Ka(i)||"updated",r=a.Nv||i[0],s=a.Fv||i[0];return t.Ov(r,s,e,a),void t.Gv()}}var h=gantt.bu.nc("data",n.yu);if(!h)return this.Vv(i);var o=gantt.bu.Qu("//data/action",h);if(!o.length)return this.Vv(i);for(var g=0;g<o.length;g++){var u=o[g];e=u.getAttribute("type"),r=u.getAttribute("sid"),s=u.getAttribute("tid");t.Ov(r,s,e,u)}t.Gv()},Vv:function(t){if(t)for(var n=0;n<t.length;n++)delete this.Lf[t[n]]},Gv:function(){this.Wf&&this.Wf--,("tree"==this.fa.Sv||this.fa.Tv)&&this.Cf.length&&this.yv(),this.l("onAfterUpdateFinish",[]),this.Cf.length||this.l("onFullSync",[])},init:function(t){this.fa=t,this.fa.Ef&&this.fa.Ef(this)},Xv:function(t){this.attachEvent("onAfterUpdate",t)},Yv:function(t){},Wv:function(t){this.attachEvent("onBeforeDataSending",t)},qv:function(t,n){t=t||2e3,this.Lv=n||(new Date).valueOf(),this.Jv=!1,this.$v=!1,this.attachEvent("onAfterUpdate",function(t,n,i,a){this.Kv(t,n,i,a)}),this.attachEvent("onFullSync",function(){this.Qv()});var i=this;window.setInterval(function(){i.Zv()},t)},Kv:function(t,n,i,a){return"collision"!=n||!(this.Jv=!0)},Qv:function(){return this.Jv&&(this.Jv=!1,this.Zv()),!0},t_:function(t,n){return!this.$v&&(this.$v=!0,void gantt.bu.get(t,n))},n_:function(t){return t.firstChild?t.firstChild.nodeValue:""},i_:function(t){for(var n=[],i=0;i<t.length;i++)n[i]=this.n_(t[i]);return n},Zv:function(){var h=this,t=this.fa.Bf(0,"version"),n=this.zf+gantt.Kf(this.zf)+["dhx_user="+this.Lv,"dhx_version="+t].join("&");n=n.replace("editing=true&",""),this.t_(n,function(t){var n=gantt.bu.Qu("//userdata",t);h.fa.od(0,"version",h.n_(n[0]));var i=gantt.bu.Qu("//update",t);if(i.length){h.s=!0;for(var a=0;a<i.length;a++){var e=i[a].getAttribute("status"),r=i[a].getAttribute("id"),s=i[a].getAttribute("parent");switch(e){case"inserted":h.l("insertCallback",[i[a],r,s]);break;case"updated":h.l("updateCallback",[i[a],r,s]);break;case"deleted":h.l("deleteCallback",[i[a],r,s])}}h.s=!1}h.$v=!1,h=null})}},gantt.Qf=function(t){t.attachEvent("insertCallback",gantt.a_),t.attachEvent("updateCallback",gantt.e_),t.attachEvent("deleteCallback",gantt.r_)},gantt.e_=function(t,n){var i=t.data||gantt.Ju.$u(t.firstChild);if(gantt.Be(n)){var a=gantt.wi(n);for(var e in i){var r=i[e];switch(e){case"id":continue;case"start_date":case"end_date":r=gantt.$.kt(r);break;case"duration":a.Ja=gantt.bs(a.xa,r)}a[e]=r}gantt.Ns(n),gantt.ae()}},gantt.a_=function(t,n,i,a){var e=t.data||gantt.Ju.$u(t.firstChild),r={add:gantt.Fc,s_:gantt.Be};"links"==a&&(r.add=gantt.Yh,r.s_=gantt.Ig),r.s_.call(gantt,n)||(e.id=n,r.add.call(gantt,e))},gantt.r_=function(t,n,i,a){var e={delete:gantt.Xc,s_:gantt.Be};"links"==a&&(e.delete=gantt.Yo,e.s_=gantt.Ig),e.s_.call(gantt,n)&&e.delete.call(gantt,n)},gantt.assert=function(t,n){t||gantt.J.Pn&&!1!==gantt.l("onError",[n])&&gantt.message({type:"error",text:n,h_:-1})},gantt.init=function(t,n,i){this.l("onBeforeGanttReady",[]),n&&i&&(this.J.xa=this.Jr=new Date(n),this.J.Ja=this.$r=new Date(i)),this.pd(),this.Fn.init(),this.J.gg||(this.J.gg=this.B()),gantt.event(window,"resize",this.o_),this.init=function(t){this.g_&&this.g_.parentNode&&(this.g_.parentNode.removeChild(this.g_),this.g_=null),this.u_(t)},this.u_(t)},gantt.u_=function(t){this.c_(t),this.xg(),this.co(),this.Md(),this.ef(),this.f_(),this.Gn(),this.pa(),this.do(),this.d_(),gantt.event(this.g_,"click",this.Ei),gantt.event(this.g_,"dblclick",this.Ui),gantt.event(this.g_,"mousemove",this.ji),gantt.event(this.g_,"contextmenu",this.Pi),this.l("onGanttReady",[]),this.Tg()},gantt.c_=function(t){this.Ni="string"==typeof t?document.getElementById(t):t,this.assert(this.Ni,"Invalid html container: "+t);var n=this.ja.sr(),i=this.ja.cr(),a="<div class='gantt_container'><div class='gantt_grid' "+n+"></div><div class='gantt_task'></div>";a+="<div class='gantt_ver_scroll'><div></div></div><div class='gantt_hor_scroll'><div></div></div></div>",this.Ni.innerHTML=a,this.g_=this.Ni.firstChild;var e=this.g_.childNodes;this.l_=e[0],this.Dg=e[1],this.v_=e[2],this.__=e[3],this.l_.innerHTML="<div class='gantt_grid_scale' "+gantt.ja.or()+"></div><div class='gantt_grid_data' "+i+"></div>",this.Ha=this.l_.childNodes[0],this.pe=this.l_.childNodes[1],this.Dg.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'><div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div></div>",this.kg=this.Dg.childNodes[0],this.cs=this.Dg.childNodes[1],this.Ro=this.cs.childNodes[0],this.Ph=this.cs.childNodes[1],this.Uh=this.cs.childNodes[2]},gantt.Qd={buttons:{p_:function(t){gantt.Ri(t)},delete:function(t){var n=gantt.locale.labels.m_,i=gantt.locale.labels.w_;gantt.Xo(n,i,function(){gantt.Be(t)?(gantt.wi(t).Vc?(gantt.Yc(t,!0),gantt.ae()):gantt.Xc(t),gantt.Zd()):gantt.Zd()})}}},gantt.k_=function(){var t=this.J.Ua,n=this.Me.length*this.J.Qa,i=this.b_?this.J.gg+1:0;return this.Ca()||this.ee()?t+n+2+i:0},gantt.x_=function(){var t=this.Pa(),n=this.zs?this.zs.Tr:0;return this.y_&&this.J.gg,this.ee()||(n=0),this.Ca()||(t=0),t+n+1},gantt.yg=function(){var t={x:!1,y:!1};return"xy"==this.J.gt?t.x=t.y=!0:"y"==this.J.gt||!0===this.J.gt?t.y=!0:"x"==this.J.gt&&(t.x=!0),t},gantt.D_=function(t){return 1*(t||"").toString().replace("px","")||0},gantt.M_=function(){var t,n=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i={boxSizing:"border-box"==(t=window.getComputedStyle?window.getComputedStyle(this.Ni,null):{width:this.Ni.clientWidth,height:this.Ni.clientHeight}).boxSizing};t.MozBoxSizing&&(i.boxSizing="border-box"==t.MozBoxSizing);for(var a=0;a<n.length;a++)i[n[a]]=t[n[a]]?this.D_(t[n[a]]):0;var e={S_:i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth,T_:i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth,A_:i.boxSizing,innerWidth:i.width,innerHeight:i.height,outerWidth:i.width,outerHeight:i.height};return e.A_?(e.innerWidth-=e.S_,e.innerHeight-=e.T_):(e.outerWidth+=e.S_,e.outerHeight+=e.T_),e},gantt.I_=function(){var t=this.yg(),n=this.M_();if(t.y){var i=this.k_();n.A_&&(i+=n.T_),this.Ni.style.height=i+"px"}if(t.x){var a=this.x_();n.A_&&(a+=n.S_),this.Ni.style.width=a+"px"}},gantt.xg=function(){this.I_();var t=this.M_();if(this.hg=t.innerHeight,!(this.hg<20)){this.l_.style.height=this.Dg.style.height=Math.max(this.hg-this.__.offsetHeight-2,0)+"px";var n=Math.max(this.hg-(this.J.Ua||0)-this.__.offsetHeight-2,0);this.pe.style.height=this.cs.style.height=n+"px";var i=Math.max(this.Pa()-1,0);this.l_.style.width=i+"px",this.l_.style.display=0===i?"none":"",t=this.M_(),this.re=t.innerWidth,this.re<20||(this.pe.style.width=Math.max(this.Pa()-1,0)+"px",this.Dg.style.width=Math.max(this.re-this.Pa()-2,0)+"px")}},gantt.Ie=function(){return this.Dg&&this.cs?{x:this.Dg.scrollLeft,y:this.cs.scrollTop}:null},gantt.E_=function(t,n){var i={};this.C_=this.C_||{},void 0!==t&&(i.x=Math.max(t,0)),void 0!==n&&(i.y=Math.max(n,0)),this.k(this.C_,i,!0)},gantt.L_=function(){var t={x:0,y:0};return this.C_&&(t.x=this.C_.x||t.x,t.y=this.C_.y||t.y),t},gantt.scrollTo=function(t,n){var i=this.L_();1*t==t&&(this.Dg.scrollLeft=t,this.E_(t,void 0)),1*n==n&&(this.v_.scrollTop=n,this.cs.scrollTop=n,this.pe.scrollTop=n,this.E_(void 0,this.J._t?this.cs.scrollTop:this.v_.scrollTop));var a=gantt.L_();this.l("onGanttScroll",[i.x,i.y,a.x,a.y])},gantt.ba=function(t){var n=this.ys(t),i=Math.max(n-this.J.pn,0);this.scrollTo(i)},gantt.Pu=function(t){var n,i=this.Dh(this.wi(t)),a=Math.max(i.x-this.J.pn,0),e=this.og().y;n=e?i.y-(e-this.J.Qa)/2:i.y,this.scrollTo(a,n)},gantt.o_=gantt.B_=function(){gantt.xg(),gantt.rg(),gantt.xg()},gantt.Tg=function(){this.l("onBeforeGanttRender",[]);var t=this.m(this.L_()),n=null;if(t&&(n=gantt.ms(t.x+this.J.pn)),this.Ia(),this.bg(),this.rg(),this.o_(),this.ng(),this.J.At&&t){var i=gantt.L_();(+n!=+gantt.ms(i.x)||i.y!=t.y)&&(n&&this.ba(n),gantt.scrollTo(void 0,t.y))}this.l("onGanttRender",[])},gantt.d_=function(){function t(t){var n=gantt.yg();gantt.P_=new Date;var i=g?-20*t.deltaX:2*t.wheelDeltaX,a=g?-40*t.deltaY:t.wheelDelta;if(i&&Math.abs(i)>Math.abs(a)){if(n.x)return!0;if(!gantt.__||!gantt.__.offsetWidth)return!0;var e=i/-40,r=gantt.Dg.scrollLeft,s=r+30*e;if(gantt.scrollTo(s,null),gantt.__.scrollLeft=s,r==gantt.Dg.scrollLeft)return!0}else{if(n.y)return!0;if(!gantt.v_||!gantt.v_.offsetHeight)return!0;e=a/-40;void 0===a&&(e=t.detail);var h=gantt.v_.scrollTop,o=gantt.v_.scrollTop+30*e;if(!gantt.J.Bn&&gantt.C_&&(gantt.C_.y==o||gantt.C_.y<=0&&o<=0))return!0;if(gantt.scrollTo(null,o),gantt.v_.scrollTop=o,h==gantt.v_.scrollTop)return!0}return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}this.event(this.__,"scroll",function(){if(new Date-(gantt.P_||0)<100)return!0;if(!gantt.z_){var t=gantt.__.scrollLeft;gantt.scrollTo(t)}}),this.event(this.v_,"scroll",function(){if(!gantt.z_){var t=gantt.v_.scrollTop;gantt.pe.scrollTop=t,gantt.scrollTo(null,t)}}),this.event(this.Dg,"scroll",function(){var t=gantt.Dg.scrollLeft;gantt.__.scrollLeft!=t&&(gantt.__.scrollLeft=t)}),this.event(this.cs,"scroll",function(){var t=gantt.cs.scrollTop;gantt.v_.scrollTop!=t&&(gantt.v_.scrollTop=t)});var g=gantt.hu.U_;g?this.event(gantt.g_,"wheel",t):this.event(gantt.g_,"mousewheel",t)},gantt.rg=function(){if(!(this.re<20||this.hg<20)){var t=this.og();t.x?(this.__.style.display="block",this.__.style.height=t.gg+"px",this.__.style.width=t.x+"px",this.__.firstChild.style.width=t.R_+"px"):(this.__.style.display="none",this.__.style.height=this.__.style.width="0px"),t.y?(this.v_.style.display="block",this.v_.style.width=t.gg+"px",this.v_.style.height=t.y+"px",this.v_.style.top=this.J.Ua+"px",this.v_.firstChild.style.height=t.j_+"px"):(this.v_.style.display="none",this.v_.style.width=this.v_.style.height="0px")}},gantt.og=function(){var t=this.Pa(),n=Math.max(this.re-t,0),i=Math.max(this.hg-this.J.Ua,0),a=this.J.gg+1,e=this.yg(),r=this.J.Qa*this.Me.length,s=this.y_=!e.y&&i<r,h=Math.max(this.zs.Tr-(s?0:a),0),o=this.b_=!e.x&&n<h,g={x:!1,y:!1,gg:a,R_:h+t+a+2,j_:r};return o&&(g.x=Math.max(this.re-(s?a:2),0)),s&&(g.y=Math.max(this.hg-(o?a:0)-this.J.Ua,0)),g},gantt.zi=function(t){if(!t)return"";var n=t.className||"";return n.baseVal&&(n=n.baseVal),n.indexOf||(n=""),gantt.H_(n)},gantt.Ci=function(t){var n=gantt.O_(t);if(0<=(gantt.zi(n)||"").indexOf("gantt_task_cell"))return null;for(var i=arguments[1]||this.J.Qt;n;){if(n.getAttribute){var a=n.getAttribute(i);if(a)return a}n=n.parentNode}return null},gantt.O_=function(t){return t.tagName?t:(t=t||window.event).target||t.srcElement},gantt.H_=function(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)},gantt.Rh=function(t,n,i){void 0===i&&(i=!0);for(var a=gantt.O_(t),e="";a;){if(e=gantt.zi(a)){var r=e.indexOf(n);if(0<=r){if(!i)return a;var s=0===r||!gantt.H_(e.charAt(r-1)),h=r+n.length>=e.length||!gantt.H_(e.charAt(r+n.length));if(s&&h)return a}}a=a.parentNode}return null},gantt.we=function(t,n){var i=gantt.O_(t);for(n=n||this.J.Qt;i;){if(i.getAttribute)if(i.getAttribute(n))return i;i=i.parentNode}return null},gantt.N_=function(t){for(var n=this.pe.childNodes,i=this.J.Qt,a=0;a<n.length;a++)if(n[a].getAttribute){if(n[a].getAttribute(i)==t)return n[a]}return null},gantt.Ka=function(){return{Ne:this.Qr.Zr?this.Qr.Zr.id:void 0,zt:this.Qr.Zr?this.Qr.Zr.mode:void 0,F_:this.Qr.Zr?this.Qr.Zr.left:void 0,$a:this.uf,ws:this.Jr?new Date(this.Jr):void 0,ks:this.$r?new Date(this.$r):void 0,hn:this.gf,Ki:this.G_,Gt:this.zs?this.zs.Er:void 0,V_:this.zs?this.zs.step:void 0}},gantt.aa=function(t,n){if(!n)return!0;var i=1e3/n;return i<1||!t.X_&&(setTimeout(function(){delete t.X_},i),t.X_=!0)},gantt.Bi=function(t){if(!this.J.St)return!1;if(t){if(this.uf==t)return this.uf;if(!this.l("onBeforeTaskSelected",[t]))return!1;this.Y_(),this.uf=t,this.Cs(t),this.l("onTaskSelected",[t])}return this.uf},gantt.Y_=function(t){(t=t||this.uf)&&(this.uf=null,this.Cs(t),this.l("onTaskUnselected",[t]))},gantt.W_=function(){return this.D(this.uf)?this.uf:null},gantt.q_=function(t){return this.Ud()==t||void gantt.$l(t)},gantt.J_=function(){return!this.K_},gantt.Kr=function(t,n,i,a){var e=gantt.uh(a)*i;if(3600<e&&e<86400){var r=t.getTimezoneOffset()-n;r&&(t=gantt.Fn.add(t,r,"minute"))}return t},DM={},gantt.Q_=function(t,n){n="function"==typeof n?n:function(){},DM[t]||(DM[t]=this[t],this[t]=n)},gantt.Z_=function(t){DM[t]&&(this[t]=DM[t],DM[t]=null)},gantt.tp=function(t){for(var n in t)this.Q_(n,t[n])},gantt.np=function(){for(var t in DM)this.Z_(t)},gantt.ip=function(t){try{t()}catch(t){window.console.error(t)}},gantt.qf=function(t,n){if(this.J_()){var i,a=this.Jc&&"off"!=this.Jc.$c;a&&(i=this.Jc.$c,this.Jc.Kc("off"));var e={},r={ag:!0,Uu:!0,Sg:!0,Tg:!0,ng:!0,Cs:!0,Ag:!0,Qo:function(t){e[t.id]=t}};for(var s in this.tp(r),this.K_=!0,this.l("onBeforeBatchUpdate",[]),this.ip(t),this.l("onAfterBatchUpdate",[]),this.np(),this.ag(),this.Uu(),e)this.Qo(e[s]);this.Sg(),this.K_=!1,n||this.Tg(),a&&(this.Jc.Kc(i),this.Jc.Qc("tasks"),this.Jc.yv(),this.Jc.Qc("links"),this.Jc.yv())}else this.ip(t)},gantt.hu={su:0<=navigator.userAgent.indexOf("MSIE")||0<=navigator.userAgent.indexOf("Trident"),ap:!window.XMLHttpRequest&&0<=navigator.userAgent.indexOf("MSIE"),ep:0<=navigator.userAgent.indexOf("MSIE 7.0")&&navigator.userAgent.indexOf("Trident")<0,rp:0<=navigator.userAgent.indexOf("MSIE 8.0")&&0<=navigator.userAgent.indexOf("Trident"),sp:0<=navigator.userAgent.indexOf("Opera"),hp:0<=navigator.userAgent.indexOf("Chrome"),op:0<=navigator.userAgent.indexOf("Safari")||0<=navigator.userAgent.indexOf("Konqueror"),U_:0<=navigator.userAgent.indexOf("Firefox"),gp:0<=navigator.userAgent.search(/iPad/gi),up:-1!=navigator.userAgent.indexOf("Edge")},gantt.bu={cp:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),window.DOMParser&&!gantt.hu.su?n=(new window.DOMParser).parseFromString(t,"text/xml"):window.fp!==window.undefined&&((n=new window.fp("Microsoft.XMLDOM")).async="false",n.dp(t)),n);var n},nc:function(t,n,i){if(void 0===n.status||n.status<400){var a=n.responseXML?n.responseXML||n:gantt.bu.parse(n.responseText||n);if(a&&null!==a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.getElementsByTagName(t)[0]}return-1!==i&&gantt.l("onLoadXMLError",["Incorrect XML",n,i]),document.createElement("DIV")},Qu:function(t,n){if(n.nodeName||(n=n.responseXML||n),gantt.hu.su)return n.selectNodes(t)||[];for(var i,a=[],e=(n.ownerDocument||n).evaluate(t,n,null,XPathResult.ANY_TYPE,null);i=e.iterateNext();)a.push(i);return a},Pv:function(t){gantt.bu.lp(t.method||"GET",t.url,t.data||"",t.async||!0,t.Jl,null,t.headers)},get:function(t,n){this.lp("GET",t,null,!0,n)},vp:function(t){return this.lp("GET",t,null,!1)},put:function(t,n,i){this.lp("PUT",t,n,!0,i)},_p:function(t,n,i){this.lp("DELETE",t,n,!0,i)},Bv:function(t,n,i){n=1==arguments.length?"":2!=arguments.length||"function"!=typeof n&&"function"!=typeof window[n]?String(n):(i=n,""),this.lp("POST",t,n,!0,i)},pp:function(t,n){return n=null===n?"":String(n),this.lp("POST",t,n,!1)},mp:function(t,n){this.lp("GET",t,null,!0,n,{url:t})},wp:function(t,n,i){2==arguments.length&&(i=n,n=""),this.lp("POST",t,n,!0,i,{url:t,kp:n})},lp:function(t,n,i,a,e,r,s){var h=window.XMLHttpRequest&&!gantt.hu.su?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(a&&(h.onreadystatechange=function(){if(4==h.readyState||o&&3==h.readyState){if((200!=h.status||""===h.responseText)&&!gantt.l("onAjaxError",[h]))return;window.setTimeout(function(){"function"==typeof e&&e.apply(window,[{yu:h,td:n}]),r&&(void 0!==r.kp?gantt.bu.wp(r.url,r.kp,e):gantt.bu.mp(r.url,e)),h=e=null},1)}}),"GET"!=t||this.cp||(n+=(0<=n.indexOf("?")?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),h.open(t,n,a),s)for(var g in s)h.setRequestHeader(g,s[g]);else"POST"==t.toUpperCase()||"PUT"==t||"DELETE"==t?h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.send(i),a?void 0:{yu:h,td:n}}},gantt.Kf=function(t){return-1!=t.indexOf("?")?"&":"?"},function(){function o(t,n){var i=t.Jl;gantt.bp.hide(t.xp),f=t.xp=null,i&&i(n)}function s(t){if(f){var n=(t=t||event).which||event.keyCode,i=!1;if(gantt.message.yp){if(13==n||32==n){var a=t.target||t.srcElement;-1<gantt.zi(a).indexOf("gantt_popup_button")&&a.click?a.click():(o(f,!0),i=!0)}27==n&&(o(f,!1),i=!0)}if(i)return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function h(t){h.Dp||((h.Dp=document.createElement("DIV")).onkeydown=s,h.Dp.className="dhx_modal_cover",document.body.appendChild(h.Dp)),document.body.scrollHeight,h.Dp.style.display=t?"inline-block":"none"}function g(t,n){return"<div "+gantt.ja.dr(t)+" class='gantt_popup_button dhtmlx_popup_button "+("gantt_"+t.toLowerCase().replace(/ /g,"_")+"_button dhtmlx_"+t.toLowerCase().replace(/ /g,"_")+"_button")+"' result='"+n+"' ><div>"+t+"</div></div>"}function u(){for(var t=[].slice.apply(arguments,[0]),n=0;n<t.length;n++)if(t[n])return t[n]}function n(t,n,i){var a=t.tagName?t:function(a,t,n){var i=document.createElement("DIV"),e=gantt.M();gantt.ja.vr(i,e),i.className=" gantt_modal_box dhtmlx_modal_box gantt-"+a.type+" dhtmlx-"+a.type,i.setAttribute("dhxbox",1);var r="";if(a.width&&(i.style.width=a.width),a.height&&(i.style.height=a.height),a.title&&(r+='<div class="gantt_popup_title dhtmlx_popup_title">'+a.title+"</div>"),r+='<div class="gantt_popup_text dhtmlx_popup_text" id="'+e+'"><span>'+(a.content?"":a.text)+'</span></div><div  class="gantt_popup_controls dhtmlx_popup_controls">',t&&(r+=g(u(a.ok,gantt.locale.labels.Mp,"OK"),!0)),n&&(r+=g(u(a.cancel,gantt.locale.labels.Sp,"Cancel"),!1)),a.buttons)for(var s=0;s<a.buttons.length;s++)r+=g(a.buttons[s],s);if(r+="</div>",i.innerHTML=r,a.content){var h=a.content;"string"==typeof h&&(h=document.getElementById(h)),"none"==h.style.display&&(h.style.display=""),i.childNodes[a.title?1:0].appendChild(h)}return i.onclick=function(t){var n=(t=t||event).target||t.srcElement;if(n.className||(n=n.parentNode),"gantt_popup_button"==n.className.split(" ")[0]){var i=n.getAttribute("result");o(a,i="true"==i||"false"!=i&&i)}},a.xp=i,(t||n)&&(f=a),i}(t,n,i);t.hidden||h(!0),document.body.appendChild(a);var e=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-a.offsetWidth)/2)),r=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-a.offsetHeight)/2));return"top"==t.position?a.style.top="-3px":a.style.top=r+"px",a.style.left=e+"px",a.onkeydown=s,gantt.bp.focus(a),t.hidden&&gantt.bp.hide(a),gantt.l("onMessagePopup",[a]),a}function e(t){return n(t,!0,!1)}function r(t){return n(t,!0,!0)}function c(t){return n(t)}function i(t,n,i){return"object"!=typeof t&&("function"==typeof n&&(i=n,n=""),t={text:t,type:n,Jl:i}),t}var f=null;document.attachEvent?document.attachEvent("onkeydown",s):document.addEventListener("keydown",s,!0),gantt.alert=function(){var t=i.apply(this,arguments);return t.type=t.type||"confirm",e(t)},gantt.confirm=function(){var t=i.apply(this,arguments);return t.type=t.type||"alert",r(t)},gantt.bp=function(){var t=i.apply(this,arguments);return t.type=t.type||"alert",c(t)},gantt.bp.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),h(!1),gantt.l("onAfterMessagePopup",[t]))},gantt.bp.focus=function(n){setTimeout(function(){var t=gantt.T(n);t.length&&t[0].focus&&t[0].focus()},1)};var d=gantt.message=function(t,n,i,a){switch((t=function(t,n,i,a){return"object"!=typeof t&&(t={text:t,type:n,h_:i,id:a}),t.id=t.id||d.M(),t.h_=t.h_||d.h_,t}.apply(this,arguments)).type=t.type||"info",t.type.split("-")[0]){case"alert":return e(t);case"confirm":return r(t);case"modalbox":return c(t);default:return function(t){d.I||(d.I=document.createElement("DIV"),d.I.className="gantt_message_area dhtmlx_message_area",d.I.style[d.position]="5px",document.body.appendChild(d.I)),d.hide(t.id);var n=document.createElement("DIV");return n.innerHTML="<div>"+t.text+"</div>",n.className="gantt-info dhtmlx-info gantt-"+t.type+" dhtmlx-"+t.type,n.onclick=function(){d.hide(t.id),t=null},gantt.ja.lr(n),"bottom"==d.position&&d.I.firstChild?d.I.insertBefore(n,d.I.firstChild):d.I.appendChild(n),0<t.h_&&(d.Tp[t.id]=window.setTimeout(function(){d.hide(t.id)},t.h_)),d.Ap[t.id]=n,n=null,t.id}(t)}};d.seed=(new Date).valueOf(),d.M=function(){return d.seed++},d.h_=4e3,d.yp=!0,d.position="top",d.Ap={},d.Tp={},d.Ip=function(){for(var t in d.Ap)d.hide(t)},d.hide=function(t){var n=d.Ap[t];n&&n.parentNode&&(window.setTimeout(function(){n.parentNode.removeChild(n),n=null},2e3),n.className+=" hidden",d.Tp[t]&&window.clearTimeout(d.Tp[t]),delete d.Ap[t])}}(),gantt.Fn={init:function(){for(var t=gantt.locale.Fn.Ep,n=gantt.locale.Fn.Cp={},i=0;i<t.length;i++)n[t[i]]=i;for(t=gantt.locale.Fn.Ul,n=gantt.locale.Fn.Lp={},i=0;i<t.length;i++)n[t[i]]=i},Cl:function(t){var n=new Date(t);return t.setHours(0),this.Bp(t),t.getHours()&&(t.getDate()<n.getDate()||t.getMonth()<n.getMonth()||t.getFullYear()<n.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},Pp:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},zp:function(t){var n=t.getDay();return gantt.J.xt&&(0===n?n=6:n--),this.Cl(this.add(t,-1*n,"day"))},Up:function(t){return t.setDate(1),this.Cl(t)},Rp:function(t){return t.setMonth(0),this.Up(t)},Ec:function(t){return this.Cl(t)},Bp:function(t){return t.getMinutes()&&t.setMinutes(0),this.jp(t),t},jp:function(t){return t.getSeconds()&&t.setSeconds(0),t.getMilliseconds()&&t.setMilliseconds(0),t},Hp:function(t,n){var i=new Date(t.valueOf());return i.setDate(i.getDate()+n),0<=n&&!t.getHours()&&i.getHours()&&(i.getDate()<=t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,n,i){var a=new Date(t.valueOf());switch(i){case"day":a=gantt.Fn.Hp(a,n);break;case"week":a=gantt.Fn.Hp(a,7*n);break;case"month":a.setMonth(a.getMonth()+n);break;case"year":a.setYear(a.getFullYear()+n);break;case"hour":a.setTime(a.getTime()+60*n*60*1e3);break;case"minute":a.setTime(a.getTime()+60*n*1e3);break;default:return gantt.Fn["add_"+i](t,n,i)}return a},Op:function(t){return t<10?"0"+t:t},m:function(t){return new Date(t.valueOf())},Nn:function(t,n){return t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+gantt.date.to_fixed(date.getDate())+"';case"%m":return'"+gantt.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+gantt.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+gantt.locale.date.day_short[date.getDay()]+"';case"%l":return'"+gantt.locale.date.day_full[date.getDay()]+"';case"%M":return'"+gantt.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+gantt.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+gantt.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+gantt.date.to_fixed(date.getHours())+"';case"%i":return'"+gantt.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+gantt.date.to_fixed(date.getSeconds())+"';case"%W":return'"+gantt.date.to_fixed(gantt.date.getISOWeek(date))+"';default:return t}}),n&&(t=t.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+t+'";')},$n:function(t,n){for(var i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",a=t.match(/%[a-zA-Z]/g),e=0;e<a.length;e++)switch(a[e]){case"%j":case"%d":i+="set[2]=temp["+e+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+e+"]||1)-1;";break;case"%y":i+="set[0]=temp["+e+"]*1+(temp["+e+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+e+"]||0;";break;case"%i":i+="set[4]=temp["+e+"]||0;";break;case"%Y":i+="set[0]=temp["+e+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+e+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+e+"]||0;";break;case"%M":i+="set[1]=gantt.locale.date.month_short_hash[temp["+e+"]]||0;";break;case"%F":i+="set[1]=gantt.locale.date.month_full_hash[temp["+e+"]]||0;"}var r="set[0],set[1],set[2],set[3],set[4],set[5]";return n&&(r=" Date.UTC("+r+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+r+");")},Np:function(t){if(!t)return!1;var n=t.getDay();0===n&&(n=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-n));var a=i.getFullYear(),e=Math.round((i.getTime()-new Date(a,0,1).getTime())/864e5);return 1+Math.floor(e/7)},Fp:function(t){return this.Np(t)},Gp:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},kf:function(t,n){return"string"==typeof t&&(gantt.D(n)&&(n="string"==typeof n?gantt.D(gantt.$[n])?gantt.$[n]:gantt.Fn.$n(n):gantt.$.kt),t=t?n(t):null),t}},gantt.Fn.Vp=function(t){gantt.Fn.Up(t);var n,i=t.getMonth();return n=9<=i?9:6<=i?6:3<=i?3:0,t.setMonth(n),t},gantt.Fn.Xp=function(t,n){return gantt.Fn.add(t,3*n,"month")},window.Yp&&(SP=jQuery,TP=[],SP.qp.Wp=function(n){if("string"==typeof(n=n||{}))return TP[n]?TP[n].apply(this,[]):void SP.error("Method "+n+" does not exist on jQuery.dhx_gantt");var i=[];return this.Jp(function(){if(this&&this.getAttribute&&!this.getAttribute("dhxgantt")){for(var t in n)"data"!=t&&(gantt.J[t]=n[t]);gantt.init(this),n.data&&gantt.parse(n.data),i.push(gantt)}}),1===i.length?i[0]:i}),gantt.locale={Fn:{Ul:["January","February","March","April","May","June","July","August","September","October","November","December"],Ep:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$p:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Kp:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{gr:"New task",Xn:"Save",Wn:"Cancel",Qp:"Details",Zp:"Edit",Jn:"Delete",tm:"",m_:"Task will be deleted permanently, are you sure?",nm:"Description",im:"Time period",am:"Type",em:"Task name",rm:"Start time",er:"Duration",sm:"",link:"Link",Vo:"will be deleted",bi:" (start)",xi:" (end)",hm:"Task",om:"Project",gm:"Milestone",ir:"Minutes",nr:"Hours",tr:"Days",um:"Week",Ze:"Months",Qe:"Years",Mp:"OK",Sp:"Cancel"}},gantt.kd.cm={J:{za:350,Qa:27,Ua:27,dh:1,ih:8,qd:75},xd:95,yd:80},gantt.kd.fm={J:{za:350,Qa:27,Ua:30,dh:2,ih:6,qd:72},xd:95,yd:80},gantt.kd.bd={J:{za:360,Qa:35,Ua:35,dh:2,ih:6,qd:75},xd:90,yd:70},gantt.kd.dm={J:{za:360,Qa:35,Ua:35,dh:1,ih:7,qd:86},xd:90,yd:80,Dd:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",lm:{},vm:{qn:"icon_delete",Vn:"icon_save"}},gantt.kd._m={J:{za:360,Qa:35,Ua:35,dh:2,ih:6,qd:75},xd:100,yd:80},gantt.kd.pm={J:{za:360,Qa:35,Ua:35,dh:2,ih:6,qd:75},xd:100,yd:80},gantt.J.Ki=500,gantt.J.Ji=!0,gantt.J.mm=!0,gantt.J.wm=1,gantt.va=!1,gantt._a=function(){gantt.J.mm&&navigator.vibrate&&navigator.vibrate(gantt.J.wm)},gantt.f_=function(){"force"!=this.J.Ji&&(this.J.Ji=this.J.Ji&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))),this.J.Ji&&(window.navigator.msPointerEnabled?this.km(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE}):this.km(["touchmove","touchstart","touchend"],function(t){return t.touches&&1<t.touches.length?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}))},gantt.km=function(t,r,s){function h(t){return t&&t.preventDefault&&t.preventDefault(),!((t||event).cancelBubble=!0)}var o,g=0,u=!1,c=!1,f=null,d=null,l=null;this.bm||(this.bm=1,gantt.event(gantt.g_,t[0],function(t){if(!s(t)&&u){d&&clearTimeout(d);var n=r(t);if(gantt.Qr.Zr.id||gantt.Qr.Zr.Ss)return gantt.Qr.fs(n),t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0);if(gantt.va)return!0;if(n&&f){var i=f.pageX-n.pageX,a=f.pageY-n.pageY;if(!c&&(5<Math.abs(i)||5<Math.abs(a))&&(gantt.z_=c=!0,g=0,o=gantt.Ie()),c){gantt.scrollTo(o.x+i,o.y+a);var e=gantt.Ie();if(o.x!=e.x&&2*i<a||o.y!=e.y&&2*a<i)return h(t)}}return h(t)}})),gantt.event(this.g_,"contextmenu",function(t){return u?h(t):void 0}),gantt.event(this.g_,t[1],function(t){if(!s(t)){if(t.touches&&1<t.touches.length)return void(u=!1);if(u=!0,(f=r(t))&&g){var n=new Date;n-g<500?(gantt.Ui(f),h(t)):g=n}else g=new Date;d=setTimeout(function(){var t=gantt.Ci(f);!t||gantt.Rh(f,"gantt_link_control")||gantt.Rh(f,"gantt_grid_data")||(gantt.Qr.ds(f),gantt.Qr.Zr&&gantt.Qr.Zr.Ss&&(function(t){var n=gantt.to,i=gantt.wi(t);if(i&&gantt.Fo(t))for(var a in n)if((i=n[a][t])&&i.getAttribute("task_id")&&i.getAttribute("task_id")==t){var e=i.cloneNode(!0);return l=i,n[a][t]=e,i.style.display="none",e.className+=" gantt_drag_move ",i.parentNode.appendChild(e)}}(t),gantt.Qr.Ts(f),gantt.G_=!0,gantt.Cs(t),gantt._a())),d=null},gantt.J.Ki)}}),gantt.event(this.g_,t[2],function(t){if(!s(t)){d&&clearTimeout(d),gantt.G_=!1,u=!1;var n=r(t);gantt.Qr.ls(n),l&&(gantt.Cs(gantt.Ci(l)),l.parentNode&&(l.parentNode.removeChild(l),gantt._a())),gantt.z_=u=c=!1,l=null}})},function(){function n(t,n){var i=gantt.hu.su?"":"%c",a=[i,'"',t,'"',i," has been deprecated in dhtmlxGantt v4.0 and will stop working in v5.0. Use ",i,'"',n,'"',i," instead. \nSee more details at http://docs.dhtmlx.com/gantt/migrating.html "].join(""),e=window.console.warn||window.console.log,r=[a];gantt.hu.su||(r=r.concat(["font-weight:bold","font-weight:normal","font-weight:bold","font-weight:normal"])),e.apply(window.console,r)}function t(t){return function(){return n("dhtmlx."+t,"gantt."+t),gantt[t].apply(gantt,arguments)}}window.P||(window.P={});for(var i=["message","alert","confirm","modalbox","uid","copy","mixin","defined","bind","assert"],a=0;a<i.length;a++)window.P[i[a]]||(dhtmlx[i[a]]=t(i[a]));window.Zl||(window.Zl=function(t){return n("new dataProcessor(url)","new gantt.dataProcessor(url)"),new gantt.Zl(t)})}();